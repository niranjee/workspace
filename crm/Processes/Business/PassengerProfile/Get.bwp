<?xml version="1.0" encoding="UTF-8"?>
<bpws:process exitOnStandardFault="no"
    name="Business.PassengerProfile.Get" suppressJoinFailure="yes"
    targetNamespace="http://xmlns.example.com/1410988335911"
    xmlns:bpws="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
    xmlns:info="http://www.tibco.com/bw/process/info"
    xmlns:ns="http://www.tibco.com/pe/EngineTypes"
    xmlns:ns0="/crm/Processes/Business/PassengerProfile/Get-Start-Input.xsd"
    xmlns:ns1="http://www.tibco.com/namespaces/tnt/plugins/as"
    xmlns:ns2="/crm/Processes/Util/getPassword-End-Output.xsd"
    xmlns:ns3="http://webservices.lms.ama.com/"
    xmlns:ns4="http://www.opentravel.org/OTA/2003/05"
    xmlns:ns5="/crm/Processes/Util/GetTierCode-Start-Input.xsd"
    xmlns:ns6="/crm/Processes/Util/GetTierCode-End-Output.xsd"
    xmlns:ns7="http://www.tibco.com/namespaces/tnt/plugins/parsexml"
    xmlns:ns8="http://tns.tibco.com/bw/palette/internal/activityerror+bw.xml.parsexml"
    xmlns:sca="http://docs.oasis-open.org/ns/opencsa/sca/200912"
    xmlns:sca-bpel="http://docs.oasis-open.org/ns/opencsa/sca-bpel/200801"
    xmlns:tib="http://www.tibco.com/bw/xslt/custom-functions"
    xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"
    xmlns:tibprop="http://ns.tibco.com/bw/property" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <tibex:Types>
        <xs:schema attributeFormDefault="unqualified"
            elementFormDefault="qualified"
            targetNamespace="http://www.tibco.com/pe/EngineTypes"
            xmlns:tns="http://www.tibco.com/pe/EngineTypes" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <xs:complexType block="extension restriction"
                final="extension restriction" name="ErrorReport">
                <xs:sequence>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="StackTrace" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="Msg" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="FullClass" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="Class" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="ProcessStack" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" minOccurs="0" name="MsgCode" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" minOccurs="0" name="Data" type="tns:anydata"/>
                </xs:sequence>
            </xs:complexType>
            <xs:complexType block="extension restriction"
                final="extension restriction" name="OptionalErrorReport">
                <xs:sequence>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" minOccurs="0"
                        name="StackTrace" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" minOccurs="0" name="Msg" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" minOccurs="0"
                        name="FullClass" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" minOccurs="0" name="Class" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" minOccurs="0"
                        name="ProcessStack" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" minOccurs="0" name="MsgCode" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" minOccurs="0" name="Data" type="tns:anydata"/>
                </xs:sequence>
            </xs:complexType>
            <xs:complexType block="extension restriction"
                final="extension restriction" name="FaultDetail">
                <xs:sequence>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="ActivityName" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" minOccurs="0" name="Data" type="tns:anydata"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="Msg" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="MsgCode" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="ProcessStack" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="StackTrace" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="FullClass" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="Class" type="xs:string"/>
                </xs:sequence>
            </xs:complexType>
            <xs:complexType block="extension restriction"
                final="extension restriction" name="ProcessContext">
                <xs:sequence>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="JobId" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="ApplicationName" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="EngineName" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" name="ProcessInstanceId" type="xs:string"/>
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" minOccurs="0"
                        name="CustomJobId" type="xs:string"/>
                    <!--xs:element name="RestartedFromCheckpoint" form="unqualified" block="extension restriction substitution" type="xs:boolean"/-->
                    <xs:element
                        block="extension restriction substitution"
                        form="unqualified" maxOccurs="unbounded"
                        minOccurs="0" name="TrackingInfo" type="xs:string"/>
                </xs:sequence>
            </xs:complexType>
            <xs:complexType block="extension restriction"
                final="extension restriction" name="anydata">
                <xs:sequence>
                    <xs:any namespace="##any" processContents="lax"/>
                </xs:sequence>
            </xs:complexType>
            <xs:element block="extension restriction substitution"
                final="extension restriction" name="OptionalErrorReport" type="tns:OptionalErrorReport"/>
            <xs:element block="extension restriction substitution"
                final="extension restriction" name="ErrorReport" type="tns:ErrorReport"/>
            <xs:element block="extension restriction substitution"
                final="extension restriction" name="FaultDetail" type="tns:FaultDetail"/>
            <xs:element block="extension restriction substitution"
                final="extension restriction" name="ProcessContext" type="tns:ProcessContext"/>
            <xs:element block="extension restriction substitution"
                final="extension restriction" name="CorrelationValue" type="xs:string"/>
        </xs:schema>
        <schema attributeFormDefault="unqualified"
            elementFormDefault="unqualified"
            targetNamespace="http://schemas.tibco.com/bw/pe/plugin/5.0/exceptions"
            version="" xmlns="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://schemas.tibco.com/bw/pe/plugin/5.0/exceptions">
            <complexType name="ActivityExceptionType">
                <sequence>
                    <element name="msg" type="string"/>
                    <element minOccurs="0" name="msgCode" type="string"/>
                </sequence>
            </complexType>
            <element name="ActivityException" type="tns:ActivityExceptionType"/>
            <complexType name="ActivityTimedOutExceptionType">
                <complexContent>
                    <extension base="tns:ActivityExceptionType"/>
                </complexContent>
            </complexType>
            <element name="ActivityTimedOutException" type="tns:ActivityTimedOutExceptionType"/>
            <complexType name="DuplicateKeyExceptionType">
                <complexContent>
                    <extension base="tns:ActivityExceptionType">
                        <sequence>
                            <element name="duplicateKey" type="string"/>
                            <element minOccurs="0" name="previousJobID" type="string"/>
                        </sequence>
                    </extension>
                </complexContent>
            </complexType>
            <element name="DuplicateKeyException" type="tns:DuplicateKeyExceptionType"/>
        </schema>
        <xsd:schema
            targetNamespace="http://www.tibco.com/namespaces/tnt/plugins/parsexml"
            xmlns:tns="http://www.tibco.com/namespaces/tnt/plugins/parsexml" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
            <xsd:complexType name="configType">
                <xsd:sequence>
                    <xsd:element form="unqualified" name="term" type="xsd:anyType"/>
                    <xsd:element form="unqualified" minOccurs="0"
                        name="inputStyle" type="xsd:string"/>
                    <xsd:element form="unqualified" minOccurs="0"
                        name="xsdVersion" type="xsd:string"/>
                </xsd:sequence>
            </xsd:complexType>
            <xsd:complexType name="dynamicInputType">
                <xsd:choice>
                    <xsd:element ref="tns:xmlBinary"/>
                    <xsd:element ref="tns:xmlString"/>
                </xsd:choice>
            </xsd:complexType>
            <xsd:element name="config" type="tns:configType"/>
            <xsd:element name="element" type="xsd:string"/>
            <xsd:element name="schemaRef" type="xsd:string"/>
            <xsd:element name="textEncoding" type="xsd:string"/>
            <xsd:element name="validateOutput" type="xsd:boolean"/>
            <xsd:element name="writeXsiTypes" type="xsd:boolean"/>
            <xsd:element name="xmlBinary">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element form="unqualified" name="bytes" type="xsd:base64Binary"/>
                        <xsd:element form="unqualified" minOccurs="0"
                            name="forceEncoding" type="xsd:string"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
            <xsd:element name="xmlParserInput" type="tns:dynamicInputType"/>
            <xsd:element name="xmlString" type="xsd:string"/>
        </xsd:schema>
        <schema elementFormDefault="unqualified"
            targetNamespace="http://schemas.tibco.com/bw/plugins/xml/5.0/xmlExceptions"
            xmlns="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://schemas.tibco.com/bw/plugins/xml/5.0/xmlExceptions">
            <element name="XMLException" type="tns:XMLExceptionType"/>
            <complexType name="XMLExceptionType">
                <sequence>
                    <element name="msg" type="string"/>
                    <element minOccurs="0" name="msgCode" type="string"/>
                </sequence>
            </complexType>
            <element name="UnsupportedEncodingException" type="tns:UnsupportedEncodingExceptionType"/>
            <complexType name="UnsupportedEncodingExceptionType">
                <complexContent>
                    <extension base="tns:XMLExceptionType">
                        <sequence>
                            <element name="encoding" type="string"/>
                        </sequence>
                    </extension>
                </complexContent>
            </complexType>
            <complexType name="XMLRenderExceptionType">
                <complexContent>
                    <extension base="tns:XMLExceptionType"/>
                </complexContent>
            </complexType>
            <element name="XMLRenderException" type="tns:XMLRenderExceptionType"/>
            <complexType name="XMLParseExceptionType">
                <complexContent>
                    <extension base="tns:XMLExceptionType"/>
                </complexContent>
            </complexType>
            <element name="XMLParseException" type="tns:XMLParseExceptionType"/>
            <complexType name="XMLTransformExceptionType">
                <complexContent>
                    <extension base="tns:XMLExceptionType"/>
                </complexContent>
            </complexType>
            <element name="XMLTransformException" type="tns:XMLTransformExceptionType"/>
            <complexType name="MissingByteCountExceptionType">
                <complexContent>
                    <extension base="tns:XMLExceptionType"/>
                </complexContent>
            </complexType>
            <element name="MissingByteCountException" type="tns:MissingByteCountExceptionType"/>
            <complexType name="ValidationExceptionType">
                <complexContent>
                    <extension base="tns:XMLExceptionType"/>
                </complexContent>
            </complexType>
            <element name="ValidationException" type="tns:ValidationExceptionType"/>
        </schema>
        <schema elementFormDefault="unqualified"
            targetNamespace="http://tns.tibco.com/bw/palette/internal/activityerror+bw.xml.parsexml"
            xmlns="http://www.w3.org/2001/XMLSchema"
            xmlns:Q1="http://schemas.tibco.com/bw/plugins/xml/5.0/xmlExceptions" xmlns:tns="http://tns.tibco.com/bw/palette/internal/activityerror+bw.xml.parsexml">
            <import namespace="http://schemas.tibco.com/bw/plugins/xml/5.0/xmlExceptions"/>
            <import namespace="http://schemas.tibco.com/bw/plugins/xml/5.0/xmlExceptions"/>
            <import namespace="http://schemas.tibco.com/bw/plugins/xml/5.0/xmlExceptions"/>
            <import namespace="http://schemas.tibco.com/bw/plugins/xml/5.0/xmlExceptions"/>
            <element name="ActivityErrorData" type="tns:ActivityErrorDataType"/>
            <complexType name="ActivityErrorDataType">
                <choice>
                    <element maxOccurs="1" minOccurs="0" ref="Q1:XMLParseException"/>
                    <element maxOccurs="1" minOccurs="0" ref="Q1:UnsupportedEncodingException"/>
                    <element maxOccurs="1" minOccurs="0" ref="Q1:MissingByteCountException"/>
                    <element maxOccurs="1" minOccurs="0" ref="Q1:ValidationException"/>
                </choice>
            </complexType>
        </schema>
    </tibex:Types>
    <tibex:ProcessInfo callable="true" createdBy="NiranjanBatana"
        createdOn="Mon Jul 17 18:04:08 IST 2023" description=""
        extraErrorVars="true" modifiers="public"
        productVersion="6.5.0 V63 2018-08-08" scalable="false"
        singleton="true" stateless="false" type="IT"/>
    <tibex:ProcessInterface context=""
        input="{/crm/Processes/Business/PassengerProfile/Get-Start-Input.xsd}getRequest" output="{http://www.opentravel.org/OTA/2003/05}OTA_ProfileReadRS"/>
    <tibex:ProcessTemplateConfigurations/>
    <notation:Diagram measurementUnit="Pixel" type="BWProcess"
        xmlns:bwnotation="http://tns.tibco.com/bw/runtime/BWNotation"
        xmlns:notation="http://www.eclipse.org/gmf/runtime/1.0.2/notation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
        <children type="2001">
            <children type="5001"/>
            <children type="3002">
                <styles xsi:type="notation:SortingStyle"/>
                <styles xsi:type="notation:FilteringStyle"/>
            </children>
            <children type="3003">
                <styles xsi:type="notation:SortingStyle"/>
                <styles xsi:type="notation:FilteringStyle"/>
            </children>
            <children type="3004">
                <children type="4018">
                    <children type="3018">
                        <children type="4020">
                            <children type="3020">
                                <children type="4005">
                                    <children type="3007">
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.0"/>
                                    <layoutConstraint x="66"
                                    xsi:type="notation:Bounds" y="97"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.1"/>
                                    <layoutConstraint x="293"
                                    xsi:type="notation:Bounds" y="96"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.2"/>
                                    <layoutConstraint x="67"
                                    xsi:type="notation:Bounds" y="342"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.3"/>
                                    <layoutConstraint x="245"
                                    xsi:type="notation:Bounds" y="347"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.4"/>
                                    <layoutConstraint x="389"
                                    xsi:type="notation:Bounds" y="340"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.5"/>
                                    <layoutConstraint x="490"
                                    xsi:type="notation:Bounds" y="248"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.6"/>
                                    <layoutConstraint x="492"
                                    xsi:type="notation:Bounds" y="402"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.7"/>
                                    <layoutConstraint x="592"
                                    xsi:type="notation:Bounds" y="339"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.8"/>
                                    <layoutConstraint x="699"
                                    xsi:type="notation:Bounds" y="343"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.9"/>
                                    <layoutConstraint x="849"
                                    xsi:type="notation:Bounds" y="339"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.10"/>
                                    <layoutConstraint x="766"
                                    xsi:type="notation:Bounds" y="95"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.11"/>
                                    <layoutConstraint x="424"
                                    xsi:type="notation:Bounds" y="494"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.12"/>
                                    <layoutConstraint x="1035"
                                    xsi:type="notation:Bounds" y="324"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.13"/>
                                    <layoutConstraint x="950"
                                    xsi:type="notation:Bounds" y="93"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.14"/>
                                    <layoutConstraint x="252"
                                    xsi:type="notation:Bounds" y="631"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.15"/>
                                    <layoutConstraint x="746"
                                    xsi:type="notation:Bounds" y="492"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.16"/>
                                    <layoutConstraint x="1072"
                                    xsi:type="notation:Bounds" y="501"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.17"/>
                                    <layoutConstraint x="1218"
                                    xsi:type="notation:Bounds" y="37"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.18"/>
                                    <layoutConstraint x="1474"
                                    xsi:type="notation:Bounds" y="94"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.19"/>
                                    <layoutConstraint x="1140"
                                    xsi:type="notation:Bounds" y="220"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.20"/>
                                    <layoutConstraint x="1478"
                                    xsi:type="notation:Bounds" y="628"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.21"/>
                                    <layoutConstraint x="1251"
                                    xsi:type="notation:Bounds" y="323"/>
                                    </children>
                                    <children type="4002">
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <children type="4017">
                                    <styles
                                    fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <layoutConstraint xsi:type="notation:Bounds"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles
                                    backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <element href="//0/@process/@activity/@activity/@activities.22"/>
                                    <layoutConstraint x="1483"
                                    xsi:type="notation:Bounds" y="321"/>
                                    </children>
                                    <styles xsi:type="notation:DrawerStyle"/>
                                    <styles xsi:type="notation:SortingStyle"/>
                                    <styles xsi:type="notation:FilteringStyle"/>
                                    <element href="//0/@process/@activity/@activity"/>
                                    </children>
                                    <styles fontName="Segoe UI"
                                    lineColor="0" xsi:type="notation:ShapeStyle"/>
                                    <styles backgroundColor="16777215"
                                    gradientEndColor="50431"
                                    gradientStartColor="16777215" xsi:type="bwnotation:BackgroundStyle"/>
                                    <styles xsi:type="bwnotation:ResizingStyle"/>
                                    <element href="//0/@process/@activity/@activity"/>
                                    <layoutConstraint height="108"
                                    width="400" x="2"
                                    xsi:type="notation:Bounds" y="2"/>
                                </children>
                                <styles xsi:type="notation:SortingStyle"/>
                                <styles xsi:type="notation:FilteringStyle"/>
                            </children>
                            <styles fontName="Segoe UI" lineColor="0" xsi:type="notation:ShapeStyle"/>
                            <styles xsi:type="bwnotation:BackgroundStyle"/>
                            <styles xsi:type="bwnotation:ResizingStyle"/>
                            <element href="//0/@process/@activity"/>
                            <layoutConstraint height="365" width="444"
                                x="30" xsi:type="notation:Bounds" y="20"/>
                        </children>
                        <styles xsi:type="notation:SortingStyle"/>
                        <styles xsi:type="notation:FilteringStyle"/>
                        <element href="//0/@process/@activity"/>
                    </children>
                    <styles fontName="Segoe UI" lineColor="0" xsi:type="notation:ShapeStyle"/>
                    <styles xsi:type="bwnotation:BackgroundStyle"/>
                    <styles xsi:type="bwnotation:ResizingStyle"/>
                    <element href="//0/@process/@activity"/>
                    <layoutConstraint height="409" width="519" xsi:type="notation:Bounds"/>
                </children>
                <styles xsi:type="notation:SortingStyle"/>
                <styles xsi:type="notation:FilteringStyle"/>
                <element href="//0/@process"/>
            </children>
            <styles fontName="Segoe UI" lineColor="0" xsi:type="notation:ShapeStyle"/>
            <element href="//0/@process"/>
            <layoutConstraint height="1262" width="2966" xsi:type="notation:Bounds"/>
        </children>
        <styles xsi:type="notation:DiagramStyle"/>
        <element href="//0"/>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.2" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.0"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.2"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.3" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.1"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.1" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.2"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.1"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.2" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.3"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.1"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.10" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.4"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.10"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.12" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.5"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.21"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.22" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.6"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.3"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.4" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.7"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.9"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.10" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.8"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.18"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.22" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.9"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.12"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.21" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.10"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.3"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.14" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.11"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.14"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.20" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.12"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.20"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.22" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.13"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.10"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.13" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.14"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.13"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.18" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.15"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.5"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.7" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.16"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.7"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.8" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.17"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.4"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.5" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.18"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.4"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.7" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.19"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.8"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.9" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.20"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.8"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.10" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.21"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.13"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.17" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.22"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.17"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.18" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.23"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.3"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.11" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.24"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.11"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.15" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.25"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.15"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.16" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.26"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.10"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.16" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.27"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.16"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.22" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.28"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.4"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.6" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.29"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.6"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.7" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.30"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.12"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.19" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.31"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
        <edges
            source="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.19"
            target="//@children.0/@children.3/@children.0/@children.0/@children.0/@children.0/@children.0/@children.0/@children.21" type="4006">
            <children type="6002">
                <layoutConstraint xsi:type="notation:Location" y="40"/>
            </children>
            <styles lineColor="0" xsi:type="notation:ConnectorStyle"/>
            <styles fontName="Segoe UI" xsi:type="notation:FontStyle"/>
            <element href="//0/@process/@activity/@activity/@links/@children.32"/>
            <bendpoints points="[0, 0, 0, 0]$[0, 0, 0, 0]" xsi:type="notation:RelativeBendpoints"/>
        </edges>
    </notation:Diagram>
    <bpws:documentation/>
    <bpws:import importType="http://www.w3.org/2001/XMLSchema"
        location="../../../Resources/WSDL/ALMS/lmsWs.xsd" namespace="http://webservices.lms.ama.com/"/>
    <bpws:import importType="http://www.w3.org/2001/XMLSchema"
        location="../../../Resources/Schema/canonical/COPA_Profile.xsd" namespace="http://www.copaair.com/schemas/trn/crm/passengerprofile"/>
    <bpws:import importType="http://www.w3.org/2001/XMLSchema"
        location="../../../Resources/Schema/OTA_PassengerProfile_RQ_RS.xsd" namespace="http://www.opentravel.org/OTA/2003/05"/>
    <bpws:import importType="http://www.w3.org/2001/XMLSchema" namespace="/crm/Processes/Util/getPassword-End-Output.xsd"/>
    <bpws:import importType="http://www.w3.org/2001/XMLSchema" namespace="/crm/Processes/Business/PassengerProfile/Get-Start-Input.xsd"/>
    <bpws:import importType="http://www.w3.org/2001/XMLSchema"
        location="../../../Resources/Schema/ActiveSpaces.xsd" namespace="http://www.tibco.com/namespaces/tnt/plugins/as"/>
    <bpws:import importType="http://www.w3.org/2001/XMLSchema" namespace="/crm/Processes/Util/GetTierCode-Start-Input.xsd"/>
    <bpws:import importType="http://www.w3.org/2001/XMLSchema" namespace="/crm/Processes/Util/GetTierCode-End-Output.xsd"/>
    <bpws:variables>
        <bpws:variable element="ns:ProcessContext"
            name="_processContext" sca-bpel:internal="true"/>
        <bpws:variable element="ns0:getRequest" name="Start"
            sca-bpel:internal="true" tibex:parameter="in"/>
        <bpws:variable element="ns1:ActivityInput" name="getCache-input" sca-bpel:internal="true"/>
        <bpws:variable element="ns1:ResultList" name="getCache" sca-bpel:internal="true"/>
        <bpws:variable element="ns2:Response" name="getPassword" sca-bpel:internal="true"/>
        <bpws:variable element="ns3:retrieveProfile"
            name="getProfileFromAmadeus-input" sca-bpel:internal="true"/>
        <bpws:variable element="ns3:retrieveProfileResponse"
            name="getProfileFromAmadeus" sca-bpel:internal="true"/>
        <bpws:variable name="PassengerProfile-Environment-ALMS-User"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            tibex:propertySource="PassengerProfile/Environment/ALMS/User" type="xsd:string"/>
        <bpws:variable element="ns4:OTA_ProfileReadRS"
            name="Map-Related-Traveler-Cache-input" sca-bpel:internal="true"/>
        <bpws:variable element="ns4:OTA_ProfileReadRS"
            name="Map-Related-Traveler-Cache" sca-bpel:internal="true"/>
        <bpws:variable element="ns5:root" name="GetTierCode-input" sca-bpel:internal="true"/>
        <bpws:variable element="ns6:root" name="GetTierCode" sca-bpel:internal="true"/>
        <bpws:variable element="ns4:OTA_ProfileReadRS"
            name="Map-Data-Full-Cache-input" sca-bpel:internal="true"/>
        <bpws:variable element="ns4:OTA_ProfileReadRS"
            name="Map-Data-Full-Cache" sca-bpel:internal="true"/>
        <bpws:variable
            name="PassengerProfile-Constants-Service-Profile-ProgramID"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            tibex:propertySource="PassengerProfile/Constants/Service/Profile/ProgramID" type="xsd:string"/>
        <bpws:variable
            name="PassengerProfile-Constants-Service-Profile-ProcessStatus-Success"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            tibex:propertySource="PassengerProfile/Constants/Service/Profile/ProcessStatus/Success" type="xsd:string"/>
        <bpws:variable
            name="PassengerProfile-Constants-Service-Profile-Found"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            tibex:propertySource="PassengerProfile/Constants/Service/Profile/Found" type="xsd:string"/>
        <bpws:variable
            name="PassengerProfile-Constants-Service-Profile-PreAssigned"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            tibex:propertySource="PassengerProfile/Constants/Service/Profile/PreAssigned" type="xsd:string"/>
        <bpws:variable element="ns1:ActivityInput" name="PutCache-input" sca-bpel:internal="true"/>
        <bpws:variable element="ns1:ResultList" name="PutCache" sca-bpel:internal="true"/>
        <bpws:variable
            name="PassengerProfile-Constants-FFPDB-ModifiedBy"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            tibex:propertySource="PassengerProfile/Constants/FFPDB/ModifiedBy" type="xsd:string"/>
        <bpws:variable element="ns1:ActivityInput"
            name="PutCache-Preassigned-input" sca-bpel:internal="true"/>
        <bpws:variable element="ns1:ResultList"
            name="PutCache-Preassigned" sca-bpel:internal="true"/>
        <bpws:variable element="ns4:OTA_ProfileReadRS"
            name="Map-Data-PreAssigned-input" sca-bpel:internal="true"/>
        <bpws:variable element="ns4:OTA_ProfileReadRS"
            name="Map-Data-PreAssigned" sca-bpel:internal="true"/>
        <bpws:variable element="ns7:xmlString"
            name="Parse-XML-FullProfile-input" sca-bpel:internal="true"/>
        <bpws:variable element="ns4:OTA_ProfileReadRS"
            name="Parse-XML-FullProfile" sca-bpel:internal="true"/>
        <bpws:variable element="ns8:ActivityErrorData"
            name="_error_Parse-XML-FullProfile" sca-bpel:internal="true"/>
        <bpws:variable element="ns:ErrorReport" name="_error" sca-bpel:internal="true"/>
        <bpws:variable element="ns4:OTA_ProfileReadRS"
            name="Map-Data-Full-input" sca-bpel:internal="true"/>
        <bpws:variable element="ns4:OTA_ProfileReadRS"
            name="Map-Data-Full" sca-bpel:internal="true"/>
        <bpws:variable element="ns5:root" name="GetTierCodeLight-input" sca-bpel:internal="true"/>
        <bpws:variable element="ns6:root" name="GetTierCodeLight" sca-bpel:internal="true"/>
        <bpws:variable element="ns4:OTA_ProfileReadRS"
            name="Map-Data-Light-input" sca-bpel:internal="true"/>
        <bpws:variable element="ns4:OTA_ProfileReadRS"
            name="Map-Data-Light" sca-bpel:internal="true"/>
        <bpws:variable element="ns4:OTA_ProfileReadRS" name="End-input"
            sca-bpel:internal="true" tibex:parameter="out"/>
        <bpws:variable
            name="PassengerProfile-Constants-OTA-Codes-EWT-UNKNOWN"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            tibex:propertySource="PassengerProfile/Constants/OTA/Codes/EWT/UNKNOWN" type="xsd:int"/>
        <bpws:variable
            name="PassengerProfile-Constants-Service-Profile-ProcessStatus-Preassigned"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            tibex:propertySource="PassengerProfile/Constants/Service/Profile/ProcessStatus/Preassigned" type="xsd:string"/>
        <bpws:variable
            name="PassengerProfile-Constants-Service-Profile-ProcessStatus-OK"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            tibex:propertySource="PassengerProfile/Constants/Service/Profile/ProcessStatus/OK" type="xsd:string"/>
        <bpws:variable
            name="PassengerProfile-Constants-Service-Profile-ProcessStatus-NOTOK"
            sca-bpel:hotUpdate="false" sca-bpel:privateProperty="true"
            sca-bpel:property="yes"
            tibex:propertySource="PassengerProfile/Constants/Service/Profile/ProcessStatus/NOTOK" type="xsd:string"/>
    </bpws:variables>
    <bpws:extensions>
        <bpws:extension mustUnderstand="no" namespace="http://www.eclipse.org/gmf/runtime/1.0.2/notation"/>
        <bpws:extension mustUnderstand="no" namespace="http://www.tibco.com/bw/process/info"/>
        <bpws:extension mustUnderstand="no" namespace="http://docs.oasis-open.org/ns/opencsa/sca-bpel/200801"/>
        <bpws:extension mustUnderstand="no" namespace="http://docs.oasis-open.org/ns/opencsa/sca/200912"/>
        <bpws:extension mustUnderstand="no" namespace="http://ns.tibco.com/bw/property"/>
        <bpws:extension mustUnderstand="no" namespace="http://www.tibco.com/bpel/2007/extensions"/>
    </bpws:extensions>
    <bpws:scope name="Get">
        <bpws:flow name="Get">
            <bpws:links>
                <bpws:link name="Start-to-getPassword" tibex:label="" tibex:linkType="SUCCESSWITHNOCONDITION"/>
                <bpws:link name="getPassword-to-getProfileFromAmadeus"/>
                <bpws:link name="Start-to-getCache"
                    tibex:label="useCache" tibex:linkType="SUCCESSWITHCONDITION"/>
                <bpws:link name="getCache-to-getPassword"
                    tibex:label="Otherwise" tibex:linkType="SUCCESSWITHNOCONDITION"/>
                <bpws:link name="getCache-to-Null"
                    tibex:label="in Cache" tibex:linkType="SUCCESSWITHCONDITION"/>
                <bpws:link name="Null-to-Light-Profile"
                    tibex:label="is light" tibex:linkType="SUCCESSWITHNOCONDITION"/>
                <bpws:link name="Map-Data-Light-to-End"/>
                <bpws:link name="getProfileFromAmadeus-to-Is-Valid"
                    tibex:label="is Valid?" tibex:linkType="SUCCESSWITHCONDITION"/>
                <bpws:link name="PutCache-to-Null"/>
                <bpws:link name="Map-Data-Full-to-End"/>
                <bpws:link name="Light-Profile-to-Map-Data-Light"/>
                <bpws:link name="getProfileFromAmadeus-to-Exception"
                    tibex:label="Otherwise" tibex:linkType="SUCCESSWITHNOCONDITION"/>
                <bpws:link name="Exception-to-Null-1"/>
                <bpws:link name="Null-1-to-End"/>
                <bpws:link name="Null-to-Full-Profile"
                    tibex:label="is Full?" tibex:linkType="SUCCESSWITHCONDITION"/>
                <bpws:link name="Full-Profile-to-Map-Data-Full"
                    tibex:label="Otherwise" tibex:linkType="SUCCESSWITHNOCONDITION"/>
                <bpws:link name="Map-Related-Traveler-Cache-to-Map-Data-Full-Cache"/>
                <bpws:link name="Map-Data-Full-Cache-to-save-Cache"/>
                <bpws:link name="Is-Valid-to-Map-Related-Traveler-Cache"
                    tibex:label="Exists Related Traveler?" tibex:linkType="SUCCESSWITHCONDITION"/>
                <bpws:link name="Is-Valid-to-Map-Data-Full-Cache"/>
                <bpws:link name="save-Cache-to-PutCache"
                    tibex:label="Save Cache?" tibex:linkType="SUCCESSWITHCONDITION"/>
                <bpws:link name="save-Cache-to-Null"
                    tibex:label="Otherwise" tibex:linkType="SUCCESSWITHNOCONDITION"/>
                <bpws:link name="Full-Profile-to-Parse-XML-FullProfile"
                    tibex:label="from Cache?" tibex:linkType="SUCCESSWITHCONDITION"/>
                <bpws:link name="Parse-XML-FullProfile-to-Map-Data-Full"/>
                <bpws:link
                    name="getProfileFromAmadeus-to-Is-preassigned"
                    tibex:label="is Preassigned?" tibex:linkType="SUCCESSWITHCONDITION"/>
                <bpws:link name="Is-preassigned-to-PutCache-Preassigned"/>
                <bpws:link name="PutCache-Preassigned-to-Map-Data-PreAssigned"/>
                <bpws:link name="Null-to-Map-Data-PreAssigned"
                    tibex:label="is pre-assigned" tibex:linkType="SUCCESSWITHCONDITION"/>
                <bpws:link name="Map-Data-PreAssigned-to-End"/>
                <bpws:link name="Is-Valid-to-GetTierCode"
                    tibex:label="tier?" tibex:linkType="SUCCESSWITHCONDITION"/>
                <bpws:link name="GetTierCode-to-Map-Data-Full-Cache"/>
                <bpws:link name="Light-Profile-to-GetTierCodeLight"
                    tibex:label="tier?" tibex:linkType="SUCCESSWITHCONDITION"/>
                <bpws:link name="GetTierCodeLight-to-Map-Data-Light"/>
            </bpws:links>
            <bpws:extensionActivity>
                <tibex:receiveEvent createInstance="yes"
                    eventTimeout="0" name="Start"
                    tibex:xpdlId="1d2f3cca-f8d7-45f8-8322-df6d62bc8f49"
                    variable="Start" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:sources>
                        <bpws:source linkName="Start-to-getPassword">
                            <bpws:transitionCondition><![CDATA[##otherwise##]]></bpws:transitionCondition>
                        </bpws:source>
                        <bpws:source linkName="Start-to-getCache">
                            <tibex:DesignExpression>
                                <tibex:expression
                                    expression="$Start/useCache = true()" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"/>
                            </tibex:DesignExpression>
                            <bpws:transitionCondition expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"><![CDATA[$Start/useCache = true()]]></bpws:transitionCondition>
                        </bpws:source>
                    </bpws:sources>
                    <tibex:eventSource>
                        <tibex:StartEvent xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"/>
                    </tibex:eventSource>
                </tibex:receiveEvent>
            </bpws:extensionActivity>
            <bpws:extensionActivity>
                <tibex:extActivity inputVariable="getCache-input"
                    name="getCache" outputVariable="getCache"
                    tibex:xpdlId="c5c04ffe-e5af-44a3-b4bd-63a9e3ff1643"
                    type="bw.generalactivities.callprocess" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="Start-to-getCache"/>
                    </bpws:targets>
                    <bpws:sources>
                        <bpws:source linkName="getCache-to-getPassword">
                            <bpws:transitionCondition><![CDATA[##otherwise##]]></bpws:transitionCondition>
                        </bpws:source>
                        <bpws:source linkName="getCache-to-Null">
                            <tibex:DesignExpression>
                                <tibex:expression
                                    expression="count($getCache/Result/Tuple) > 0 and ($getCache/HasError = false()) and ($getCache/Result[1]/Tuple/ForceSync = false())" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"/>
                            </tibex:DesignExpression>
                            <bpws:transitionCondition expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"><![CDATA[count($getCache/Result/Tuple) > 0 and ($getCache/HasError = false()) and ($getCache/Result[1]/Tuple/ForceSync = false())]]></bpws:transitionCondition>
                        </bpws:source>
                    </bpws:sources>
                    <tibex:inputBindings>
                        <tibex:inputBinding
                            expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://webservices.lms.ama.com/&quot; xmlns:pfx2=&quot;http://www.opentravel.org/OTA/2003/05&quot; xmlns:ns=&quot;http://www.tibco.com/pe/WriteToLogActivitySchema&quot; xmlns:pfx3=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:pfx4=&quot;http://www.copaair.com/schemas/trn/crm/passengerprofile&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:JSON=&quot;java://com.hp.tibco.bw.functions.json.JSON&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://www.tibco.com/namespaces/tnt/plugins/as&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:Utilities=&quot;java://Utilities&quot; xmlns:wsdl=&quot;http://schemas.xmlsoap.org/wsdl/&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://www.hp.com/schemas/services/exception&quot; xmlns:StringUtil=&quot;java://com.hp.tibco.bw.functions.string.StringFunctions&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;Start&quot;/>&#xa;    &lt;xsl:template name=&quot;getCache-Input&quot; match=&quot;/&quot;>&#xa;        &lt;ns1:ActivityInput>&#xa;            &lt;Tuple>&#xa;                &lt;FrequentFlyerNumber>&#xa;                    &lt;xsl:value-of select=&quot;$Start/pfx2:OTA_ReadRQ/pfx2:ReadRequests/pfx2:ReadRequest[1]/pfx2:UniqueID/@ID&quot;/>&#xa;                &lt;/FrequentFlyerNumber>&#xa;            &lt;/Tuple>&#xa;        &lt;/ns1:ActivityInput>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                    </tibex:inputBindings>
                    <tibex:CallProcess subProcessName="Util.GetCacheDB" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"/>
                </tibex:extActivity>
            </bpws:extensionActivity>
            <bpws:extensionActivity>
                <tibex:extActivity name="getPassword"
                    outputVariable="getPassword"
                    tibex:xpdlId="1b0c00ad-27d0-4741-ad59-6c4456834e47"
                    type="bw.generalactivities.callprocess" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="Start-to-getPassword"/>
                        <bpws:target linkName="getCache-to-getPassword"/>
                    </bpws:targets>
                    <bpws:sources>
                        <bpws:source linkName="getPassword-to-getProfileFromAmadeus"/>
                    </bpws:sources>
                    <tibex:CallProcess subProcessName="Util.getPassword" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"/>
                </tibex:extActivity>
            </bpws:extensionActivity>
            <bpws:extensionActivity>
                <tibex:extActivity
                    inputVariable="getProfileFromAmadeus-input"
                    name="getProfileFromAmadeus"
                    outputVariable="getProfileFromAmadeus"
                    tibex:xpdlId="f592493e-5fb8-4797-90b3-375e820d2c0c"
                    type="bw.generalactivities.callprocess" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="getPassword-to-getProfileFromAmadeus"/>
                    </bpws:targets>
                    <bpws:sources>
                        <bpws:source linkName="getProfileFromAmadeus-to-Is-Valid">
                            <tibex:DesignExpression>
                                <tibex:expression
                                    expression="($getProfileFromAmadeus/retrieveMemberResponse/processStatus = $PassengerProfile-Constants-Service-Profile-ProcessStatus-OK and $getProfileFromAmadeus/retrieveMemberResponse/processCode = $PassengerProfile-Constants-Service-Profile-ProcessStatus-Success)" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"/>
                            </tibex:DesignExpression>
                            <bpws:transitionCondition expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"><![CDATA[($getProfileFromAmadeus/retrieveMemberResponse/processStatus = $PassengerProfile-Constants-Service-Profile-ProcessStatus-OK and $getProfileFromAmadeus/retrieveMemberResponse/processCode = $PassengerProfile-Constants-Service-Profile-ProcessStatus-Success)]]></bpws:transitionCondition>
                        </bpws:source>
                        <bpws:source linkName="getProfileFromAmadeus-to-Exception">
                            <bpws:transitionCondition><![CDATA[##otherwise##]]></bpws:transitionCondition>
                        </bpws:source>
                        <bpws:source linkName="getProfileFromAmadeus-to-Is-preassigned">
                            <tibex:DesignExpression>
                                <tibex:expression
                                    expression="($getProfileFromAmadeus/retrieveMemberResponse/processStatus = $PassengerProfile-Constants-Service-Profile-ProcessStatus-NOTOK and $getProfileFromAmadeus/retrieveMemberResponse/processCode = $PassengerProfile-Constants-Service-Profile-ProcessStatus-Preassigned)" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"/>
                            </tibex:DesignExpression>
                            <bpws:transitionCondition expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"><![CDATA[($getProfileFromAmadeus/retrieveMemberResponse/processStatus = $PassengerProfile-Constants-Service-Profile-ProcessStatus-NOTOK and $getProfileFromAmadeus/retrieveMemberResponse/processCode = $PassengerProfile-Constants-Service-Profile-ProcessStatus-Preassigned)]]></bpws:transitionCondition>
                        </bpws:source>
                    </bpws:sources>
                    <tibex:inputBindings>
                        <tibex:inputBinding
                            expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://webservices.lms.ama.com/&quot; xmlns:pfx2=&quot;http://www.opentravel.org/OTA/2003/05&quot; xmlns:ns=&quot;http://www.tibco.com/pe/WriteToLogActivitySchema&quot; xmlns:pfx3=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:pfx4=&quot;http://www.copaair.com/schemas/trn/crm/passengerprofile&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:JSON=&quot;java://com.hp.tibco.bw.functions.json.JSON&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://www.tibco.com/namespaces/tnt/plugins/as&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:Utilities=&quot;java://Utilities&quot; xmlns:wsdl=&quot;http://schemas.xmlsoap.org/wsdl/&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://www.hp.com/schemas/services/exception&quot; xmlns:StringUtil=&quot;java://com.hp.tibco.bw.functions.string.StringFunctions&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;Start&quot;/>&#xa;    &lt;xsl:param name=&quot;PassengerProfile-Environment-ALMS-User&quot;/>&#xa;    &lt;xsl:param name=&quot;getPassword&quot;/>&#xa;    &lt;xsl:template name=&quot;getProfileFromAmadeus-Input&quot; match=&quot;/&quot;>&#xa;        &lt;pfx:retrieveProfile>&#xa;            &lt;MessageHeader>&#xa;                &lt;pfx:header>&#xa;                    &lt;passWord>&#xa;                        &lt;xsl:value-of select=&quot;$getPassword/password&quot;/>&#xa;                    &lt;/passWord>&#xa;                    &lt;userName>&#xa;                        &lt;xsl:value-of select=&quot;$PassengerProfile-Environment-ALMS-User&quot;/>&#xa;                    &lt;/userName>&#xa;                &lt;/pfx:header>&#xa;            &lt;/MessageHeader>&#xa;            &lt;parameters>&#xa;                &lt;pfx:retrieveProfile>&#xa;                    &lt;retrieveProfileRequest>&#xa;                        &lt;simpleContent/>&#xa;                        &lt;xsl:if test=&quot;$Start/pfx2:OTA_ReadRQ/pfx2:ReadRequests/pfx2:ReadRequest[1]/pfx2:UniqueID/@ID&quot;>&#xa;                            &lt;memberId>&#xa;                                &lt;xsl:value-of select=&quot;$Start/pfx2:OTA_ReadRQ/pfx2:ReadRequests/pfx2:ReadRequest[1]/pfx2:UniqueID/@ID&quot;/>&#xa;                            &lt;/memberId>&#xa;                        &lt;/xsl:if>&#xa;                        &lt;retrieveMemberProfiles>&#xa;                            &lt;retrieveMemberProfileType>&#xa;                                &lt;xsl:value-of select=&quot;&amp;quot;ALL&amp;quot;&quot;/>&#xa;                            &lt;/retrieveMemberProfileType>&#xa;                        &lt;/retrieveMemberProfiles>&#xa;                    &lt;/retrieveProfileRequest>&#xa;                &lt;/pfx:retrieveProfile>&#xa;            &lt;/parameters>&#xa;        &lt;/pfx:retrieveProfile>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                    </tibex:inputBindings>
                    <tibex:CallProcess
                        subProcessName="Application.Amadeus.GetProfileFromAmadeus" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"/>
                </tibex:extActivity>
            </bpws:extensionActivity>
            <bpws:empty name="Is-Valid" tibex:xpdlId="4fc3c57b-6c21-4699-944d-2fba5ca70cff">
                <bpws:targets>
                    <bpws:target linkName="getProfileFromAmadeus-to-Is-Valid"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="Is-Valid-to-Map-Related-Traveler-Cache">
                        <tibex:DesignExpression>
                            <tibex:expression
                                expression="count($getProfileFromAmadeus/retrieveMemberResponse/nominees) > 0" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"/>
                        </tibex:DesignExpression>
                        <bpws:transitionCondition expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"><![CDATA[count($getProfileFromAmadeus/retrieveMemberResponse/nominees) > 0]]></bpws:transitionCondition>
                    </bpws:source>
                    <bpws:source linkName="Is-Valid-to-Map-Data-Full-Cache"/>
                    <bpws:source linkName="Is-Valid-to-GetTierCode">
                        <tibex:DesignExpression>
                            <tibex:expression
                                expression="string-length($getProfileFromAmadeus/retrieveMemberResponse/memberCard/tier) > 0" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"/>
                        </tibex:DesignExpression>
                        <bpws:transitionCondition expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"><![CDATA[string-length($getProfileFromAmadeus/retrieveMemberResponse/memberCard/tier) > 0]]></bpws:transitionCondition>
                    </bpws:source>
                </bpws:sources>
            </bpws:empty>
            <bpws:extensionActivity>
                <tibex:activityExtension
                    inputVariable="Map-Related-Traveler-Cache-input"
                    name="Map-Related-Traveler-Cache"
                    outputVariable="Map-Related-Traveler-Cache"
                    tibex:xpdlId="5941426d-6750-4a78-b4ee-4d512a61de80" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="Is-Valid-to-Map-Related-Traveler-Cache"/>
                    </bpws:targets>
                    <bpws:sources>
                        <bpws:source linkName="Map-Related-Traveler-Cache-to-Map-Data-Full-Cache"/>
                    </bpws:sources>
                    <tibex:inputBindings>
                        <tibex:inputBinding
                            expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx2=&quot;http://www.opentravel.org/OTA/2003/05&quot; xmlns:pfx4=&quot;http://www.copaair.com/schemas/trn/crm/passengerprofile&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;getProfileFromAmadeus&quot;/>&#xa;    &lt;xsl:param name=&quot;Start&quot;/>&#xa;    &lt;xsl:template name=&quot;Map-Related-Traveler-Cache-Input&quot; match=&quot;/&quot;>&#xa;        &lt;pfx2:OTA_ProfileReadRS>&#xa;            &lt;xsl:attribute name=&quot;Version&quot;>&#xa;                &lt;xsl:value-of select=&quot;$Start/pfx2:OTA_ReadRQ/@Version&quot;/>&#xa;            &lt;/xsl:attribute>&#xa;            &lt;pfx2:Success/>&#xa;            &lt;pfx2:Profiles>&#xa;                &lt;xsl:for-each select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/nominees&quot;>&#xa;                    &lt;pfx2:ProfileInfo>&#xa;                        &lt;pfx2:Profile>&#xa;                            &lt;pfx2:Customer>&#xa;                                &lt;xsl:if test=&quot;string-length(gender) > 0&quot;>&#xa;                                    &lt;xsl:choose>&#xa;                                        &lt;xsl:when test=&quot;gender = &amp;quot;M&amp;quot;&quot;>&#xa;                                            &lt;xsl:attribute name=&quot;Gender&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;&amp;quot;Male&amp;quot;&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                        &lt;/xsl:when>&#xa;                                        &lt;xsl:when test=&quot;gender = &amp;quot;F&amp;quot;&quot;>&#xa;                                            &lt;xsl:attribute name=&quot;Gender&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;&amp;quot;Female&amp;quot;&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                        &lt;/xsl:when>&#xa;                                        &lt;xsl:otherwise/>&#xa;                                    &lt;/xsl:choose>&#xa;                                &lt;/xsl:if>&#xa;                                &lt;xsl:if test=&quot;string-length(birthDate) > 0&quot;>&#xa;                                    &lt;xsl:attribute name=&quot;BirthDate&quot;>&#xa;                                        &lt;xsl:value-of select=&quot;tib:create-date(year-from-date(birthDate), month-from-date(birthDate), day-from-date(birthDate))&quot;/>&#xa;                                    &lt;/xsl:attribute>&#xa;                                &lt;/xsl:if>&#xa;                                &lt;xsl:if test=&quot;string-length(surname) > 0&quot;>&#xa;                                    &lt;pfx2:PersonName>&#xa;                                        &lt;xsl:choose>&#xa;                                            &lt;xsl:when test=&quot;string-length(prefix) > 0&quot;>&#xa;                                                &lt;xsl:if test=&quot;prefix&quot;>&#xa;                                                    &lt;pfx2:NamePrefix>&#xa;                                                        &lt;xsl:value-of select=&quot;prefix&quot;/>&#xa;                                                    &lt;/pfx2:NamePrefix>&#xa;                                                &lt;/xsl:if>&#xa;                                            &lt;/xsl:when>&#xa;                                            &lt;xsl:otherwise/>&#xa;                                        &lt;/xsl:choose>&#xa;                                        &lt;xsl:choose>&#xa;                                            &lt;xsl:when test=&quot;string-length(name) > 0&quot;>&#xa;                                                &lt;xsl:if test=&quot;name&quot;>&#xa;                                                    &lt;pfx2:GivenName>&#xa;                                                        &lt;xsl:value-of select=&quot;name&quot;/>&#xa;                                                    &lt;/pfx2:GivenName>&#xa;                                                &lt;/xsl:if>&#xa;                                            &lt;/xsl:when>&#xa;                                            &lt;xsl:otherwise/>&#xa;                                        &lt;/xsl:choose>&#xa;                                        &lt;xsl:choose>&#xa;                                            &lt;xsl:when test=&quot;string-length(middleName) > 0&quot;>&#xa;                                                &lt;xsl:if test=&quot;middleName&quot;>&#xa;                                                    &lt;pfx2:MiddleName>&#xa;                                                        &lt;xsl:value-of select=&quot;middleName&quot;/>&#xa;                                                    &lt;/pfx2:MiddleName>&#xa;                                                &lt;/xsl:if>&#xa;                                            &lt;/xsl:when>&#xa;                                            &lt;xsl:otherwise/>&#xa;                                        &lt;/xsl:choose>&#xa;                                        &lt;xsl:choose>&#xa;                                            &lt;xsl:when test=&quot;string-length(surname) > 0&quot;>&#xa;                                                &lt;xsl:if test=&quot;surname&quot;>&#xa;                                                    &lt;pfx2:Surname>&#xa;                                                        &lt;xsl:value-of select=&quot;surname&quot;/>&#xa;                                                    &lt;/pfx2:Surname>&#xa;                                                &lt;/xsl:if>&#xa;                                            &lt;/xsl:when>&#xa;                                            &lt;xsl:otherwise>&#xa;                                                &lt;pfx2:Surname>&#xa;                                                    &lt;xsl:value-of select=&quot;&amp;quot; &amp;quot;&quot;/>&#xa;                                                &lt;/pfx2:Surname>&#xa;                                            &lt;/xsl:otherwise>&#xa;                                        &lt;/xsl:choose>&#xa;                                        &lt;xsl:choose>&#xa;                                            &lt;xsl:when test=&quot;string-length(title) > 0&quot;>&#xa;                                                &lt;xsl:if test=&quot;title&quot;>&#xa;                                                    &lt;pfx2:NameTitle>&#xa;                                                        &lt;xsl:value-of select=&quot;title&quot;/>&#xa;                                                    &lt;/pfx2:NameTitle>&#xa;                                                &lt;/xsl:if>&#xa;                                            &lt;/xsl:when>&#xa;                                            &lt;xsl:otherwise/>&#xa;                                        &lt;/xsl:choose>&#xa;                                    &lt;/pfx2:PersonName>&#xa;                                &lt;/xsl:if>&#xa;                                &lt;xsl:if test=&quot;string-length(address/seqNo) > 0&quot;>&#xa;                                    &lt;pfx2:Address>&#xa;                                        &lt;xsl:choose>&#xa;                                            &lt;xsl:when test=&quot;address/addressType = &amp;quot;HOM&amp;quot;&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;Type&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;&amp;quot;1&amp;quot;&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:when>&#xa;                                            &lt;xsl:when test=&quot;address/addressType = &amp;quot;BUS&amp;quot;&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;Type&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;&amp;quot;2&amp;quot;&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:when>&#xa;                                        &lt;/xsl:choose>&#xa;                                        &lt;xsl:if test=&quot;string-length(address/seqNo) > 0&quot;>&#xa;                                            &lt;xsl:if test=&quot;address/seqNo&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;RPH&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;address/seqNo&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:if>&#xa;                                        &lt;/xsl:if>&#xa;                                        &lt;xsl:if test=&quot;string-length(address/language) > 0&quot;>&#xa;                                            &lt;xsl:if test=&quot;address/language&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;Language&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;address/language&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:if>&#xa;                                        &lt;/xsl:if>&#xa;                                        &lt;xsl:choose>&#xa;                                            &lt;xsl:when test=&quot;address/status = &amp;quot;T&amp;quot;&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;ValidInd&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;true()&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:when>&#xa;                                            &lt;xsl:when test=&quot;address/status = &amp;quot;F&amp;quot;&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;ValidInd&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;false()&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:when>&#xa;                                            &lt;xsl:otherwise/>&#xa;                                        &lt;/xsl:choose>&#xa;                                        &lt;xsl:choose>&#xa;                                            &lt;xsl:when test=&quot;address/preferred = &amp;quot;T&amp;quot;&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;DefaultInd&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;true()&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:when>&#xa;                                            &lt;xsl:when test=&quot;address/preferred = &amp;quot;F&amp;quot;&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;DefaultInd&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;false()&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:when>&#xa;                                            &lt;xsl:otherwise/>&#xa;                                        &lt;/xsl:choose>&#xa;                                        &lt;xsl:if test=&quot;string-length(address/addressType) > 0&quot;>&#xa;                                            &lt;xsl:if test=&quot;address/addressType&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;Remark&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;address/addressType&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:if>&#xa;                                        &lt;/xsl:if>&#xa;                                        &lt;xsl:if test=&quot;address/department&quot;>&#xa;                                            &lt;pfx2:BldgRoom>&#xa;                                                &lt;xsl:value-of select=&quot;address/department&quot;/>&#xa;                                            &lt;/pfx2:BldgRoom>&#xa;                                        &lt;/xsl:if>&#xa;                                        &lt;xsl:if test=&quot;string-length(address/addressLine1) > 0&quot;>&#xa;                                            &lt;xsl:if test=&quot;address/addressLine1&quot;>&#xa;                                                &lt;pfx2:AddressLine>&#xa;                                                    &lt;xsl:value-of select=&quot;address/addressLine1&quot;/>&#xa;                                                &lt;/pfx2:AddressLine>&#xa;                                            &lt;/xsl:if>&#xa;                                        &lt;/xsl:if>&#xa;                                        &lt;xsl:if test=&quot;string-length(address/addressLine2) > 0&quot;>&#xa;                                            &lt;xsl:if test=&quot;address/addressLine2&quot;>&#xa;                                                &lt;pfx2:AddressLine>&#xa;                                                    &lt;xsl:value-of select=&quot;address/addressLine2&quot;/>&#xa;                                                &lt;/pfx2:AddressLine>&#xa;                                            &lt;/xsl:if>&#xa;                                        &lt;/xsl:if>&#xa;                                        &lt;xsl:if test=&quot;string-length(address/addressLine3) > 0&quot;>&#xa;                                            &lt;xsl:if test=&quot;address/addressLine3&quot;>&#xa;                                                &lt;pfx2:AddressLine>&#xa;                                                    &lt;xsl:value-of select=&quot;address/addressLine3&quot;/>&#xa;                                                &lt;/pfx2:AddressLine>&#xa;                                            &lt;/xsl:if>&#xa;                                        &lt;/xsl:if>&#xa;                                        &lt;xsl:if test=&quot;string-length(address/city) > 0&quot;>&#xa;                                            &lt;xsl:if test=&quot;address/city&quot;>&#xa;                                                &lt;pfx2:CityName>&#xa;                                                    &lt;xsl:value-of select=&quot;address/city&quot;/>&#xa;                                                &lt;/pfx2:CityName>&#xa;                                            &lt;/xsl:if>&#xa;                                        &lt;/xsl:if>&#xa;                                        &lt;xsl:if test=&quot;string-length(address/zipCode) > 0&quot;>&#xa;                                            &lt;xsl:if test=&quot;address/zipCode&quot;>&#xa;                                                &lt;pfx2:PostalCode>&#xa;                                                    &lt;xsl:value-of select=&quot;address/zipCode&quot;/>&#xa;                                                &lt;/pfx2:PostalCode>&#xa;                                            &lt;/xsl:if>&#xa;                                        &lt;/xsl:if>&#xa;                                        &lt;xsl:if test=&quot;address/state&quot;>&#xa;                                            &lt;pfx2:StateProv>&#xa;                                                &lt;xsl:value-of select=&quot;address/state&quot;/>&#xa;                                            &lt;/pfx2:StateProv>&#xa;                                        &lt;/xsl:if>&#xa;                                        &lt;xsl:if test=&quot;address/country&quot;>&#xa;                                            &lt;pfx2:CountryName>&#xa;                                                &lt;xsl:value-of select=&quot;address/country&quot;/>&#xa;                                            &lt;/pfx2:CountryName>&#xa;                                        &lt;/xsl:if>&#xa;                                        &lt;xsl:if test=&quot;address/company&quot;>&#xa;                                            &lt;pfx2:CompanyName>&#xa;                                                &lt;xsl:value-of select=&quot;address/company&quot;/>&#xa;                                            &lt;/pfx2:CompanyName>&#xa;                                        &lt;/xsl:if>&#xa;                                    &lt;/pfx2:Address>&#xa;                                &lt;/xsl:if>&#xa;                                &lt;xsl:if test=&quot;string-length(nationality) > 0&quot;>&#xa;                                    &lt;pfx2:CitizenCountryName>&#xa;                                        &lt;xsl:if test=&quot;string-length(nationality) > 0&quot;>&#xa;                                            &lt;xsl:if test=&quot;nationality&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;Code&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;nationality&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:if>&#xa;                                        &lt;/xsl:if>&#xa;                                    &lt;/pfx2:CitizenCountryName>&#xa;                                &lt;/xsl:if>&#xa;                                &lt;xsl:for-each select=&quot;memberDocs&quot;>&#xa;                                    &lt;xsl:if test=&quot;string-length(documentId) > 0&quot;>&#xa;                                        &lt;pfx2:Document>&#xa;                                            &lt;xsl:if test=&quot;string-length(issuingCountry) > 0&quot;>&#xa;                                                &lt;xsl:if test=&quot;issuingCountry&quot;>&#xa;                                                    &lt;xsl:attribute name=&quot;DocIssueLocation&quot;>&#xa;                                                        &lt;xsl:value-of select=&quot;issuingCountry&quot;/>&#xa;                                                    &lt;/xsl:attribute>&#xa;                                                &lt;/xsl:if>&#xa;                                            &lt;/xsl:if>&#xa;                                            &lt;xsl:if test=&quot;string-length(documentId) > 0&quot;>&#xa;                                                &lt;xsl:if test=&quot;documentId&quot;>&#xa;                                                    &lt;xsl:attribute name=&quot;DocID&quot;>&#xa;                                                        &lt;xsl:value-of select=&quot;documentId&quot;/>&#xa;                                                    &lt;/xsl:attribute>&#xa;                                                &lt;/xsl:if>&#xa;                                            &lt;/xsl:if>&#xa;                                            &lt;xsl:choose>&#xa;                                                &lt;xsl:when test=&quot;documentType = &amp;quot;PASSPORT&amp;quot;&quot;>&#xa;                                                    &lt;xsl:attribute name=&quot;DocType&quot;>&#xa;                                                        &lt;xsl:value-of select=&quot;2&quot;/>&#xa;                                                    &lt;/xsl:attribute>&#xa;                                                &lt;/xsl:when>&#xa;                                                &lt;xsl:when test=&quot;documentType = &amp;quot;DRIVING_LICENSE&amp;quot;&quot;>&#xa;                                                    &lt;xsl:attribute name=&quot;DocType&quot;>&#xa;                                                        &lt;xsl:value-of select=&quot;4&quot;/>&#xa;                                                    &lt;/xsl:attribute>&#xa;                                                &lt;/xsl:when>&#xa;                                                &lt;xsl:when test=&quot;documentType = &amp;quot;NATIONAL_ID&amp;quot;&quot;>&#xa;                                                    &lt;xsl:attribute name=&quot;DocType&quot;>&#xa;                                                        &lt;xsl:value-of select=&quot;5&quot;/>&#xa;                                                    &lt;/xsl:attribute>&#xa;                                                &lt;/xsl:when>&#xa;                                                &lt;xsl:when test=&quot;documentType = &amp;quot;SOCIAL_SECURITY&amp;quot;&quot;>&#xa;                                                    &lt;xsl:attribute name=&quot;DocType&quot;>&#xa;                                                        &lt;xsl:value-of select=&quot;100&quot;/>&#xa;                                                    &lt;/xsl:attribute>&#xa;                                                &lt;/xsl:when>&#xa;                                                &lt;xsl:otherwise>&#xa;                                                    &lt;xsl:attribute name=&quot;DocType&quot;>&#xa;                                                        &lt;xsl:value-of select=&quot;17&quot;/>&#xa;                                                    &lt;/xsl:attribute>&#xa;                                                &lt;/xsl:otherwise>&#xa;                                            &lt;/xsl:choose>&#xa;                                            &lt;xsl:if test=&quot;string-length(validFrom) > 0&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;EffectiveDate&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;tib:create-date(year-from-date(validFrom), month-from-date(validFrom), day-from-date(validFrom))&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:if>&#xa;                                            &lt;xsl:if test=&quot;string-length(validUntil) > 0&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;ExpireDate&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;tib:create-date(year-from-date(validUntil), month-from-date(validUntil), day-from-date(validUntil))&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:if>&#xa;                                            &lt;xsl:if test=&quot;string-length(documentType) > 0&quot;>&#xa;                                                &lt;xsl:if test=&quot;documentType&quot;>&#xa;                                                    &lt;xsl:attribute name=&quot;Remark&quot;>&#xa;                                                        &lt;xsl:value-of select=&quot;documentType&quot;/>&#xa;                                                    &lt;/xsl:attribute>&#xa;                                                &lt;/xsl:if>&#xa;                                            &lt;/xsl:if>&#xa;                                            &lt;xsl:if test=&quot;string-length(seqNo) > 0&quot;>&#xa;                                                &lt;pfx2:TPA_Extensions>&#xa;                                                    &lt;pfx4:CopaDocumentExt>&#xa;                                                        &lt;xsl:if test=&quot;seqNo&quot;>&#xa;                                                            &lt;xsl:attribute name=&quot;RPH&quot;>&#xa;                                                                &lt;xsl:value-of select=&quot;seqNo&quot;/>&#xa;                                                            &lt;/xsl:attribute>&#xa;                                                        &lt;/xsl:if>&#xa;                                                    &lt;/pfx4:CopaDocumentExt>&#xa;                                                &lt;/pfx2:TPA_Extensions>&#xa;                                            &lt;/xsl:if>&#xa;                                        &lt;/pfx2:Document>&#xa;                                    &lt;/xsl:if>&#xa;                                &lt;/xsl:for-each>&#xa;                                &lt;xsl:if test=&quot;string-length(simpleContent[key = &amp;quot;CONNECT_MILES_NUMBER&amp;quot;]/value) > 0&quot;>&#xa;                                    &lt;pfx2:TPA_Extensions>&#xa;                                        &lt;pfx4:CopaProfileExt>&#xa;                                            &lt;xsl:if test=&quot;string-length(simpleContent[key = &amp;quot;CONNECT_MILES_NUMBER&amp;quot;]/value) > 0&quot;>&#xa;                                                &lt;xsl:if test=&quot;simpleContent[key = &amp;quot;CONNECT_MILES_NUMBER&amp;quot;]/value&quot;>&#xa;                                                    &lt;pfx4:FrequentFlyerNumber>&#xa;                                                        &lt;xsl:value-of select=&quot;simpleContent[key = &amp;quot;CONNECT_MILES_NUMBER&amp;quot;]/value&quot;/>&#xa;                                                    &lt;/pfx4:FrequentFlyerNumber>&#xa;                                                &lt;/xsl:if>&#xa;                                            &lt;/xsl:if>&#xa;                                            &lt;xsl:if test=&quot;string-length(address/poBox) > 0&quot;>&#xa;                                                &lt;xsl:if test=&quot;address/poBox&quot;>&#xa;                                                    &lt;pfx4:PO_Box>&#xa;                                                        &lt;xsl:value-of select=&quot;address/poBox&quot;/>&#xa;                                                    &lt;/pfx4:PO_Box>&#xa;                                                &lt;/xsl:if>&#xa;                                            &lt;/xsl:if>&#xa;                                        &lt;/pfx4:CopaProfileExt>&#xa;                                    &lt;/pfx2:TPA_Extensions>&#xa;                                &lt;/xsl:if>&#xa;                            &lt;/pfx2:Customer>&#xa;                        &lt;/pfx2:Profile>&#xa;                    &lt;/pfx2:ProfileInfo>&#xa;                &lt;/xsl:for-each>&#xa;            &lt;/pfx2:Profiles>&#xa;        &lt;/pfx2:OTA_ProfileReadRS>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                    </tibex:inputBindings>
                    <tibex:config>
                        <bwext:BWActivity
                            activityTypeID="bw.generalactivities.mapper"
                            version="6.0.0.001"
                            xmlns:OTA_2003_05="http://www.opentravel.org/OTA/2003/05"
                            xmlns:activityconfig="http://tns.tibco.com/bw/model/activityconfig"
                            xmlns:bwext="http://tns.tibco.com/bw/model/core/bwext"
                            xmlns:generalactivities="http://ns.tibco.com/bw/palette/generalactivities" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <activityConfig>
                                <properties name="config" xsi:type="activityconfig:EMFProperty">
                                    <type href="http://ns.tibco.com/bw/palette/generalactivities#//Mapper"/>
                                    <value
                                    inputQName="OTA_2003_05:OTA_ProfileReadRS" xsi:type="generalactivities:Mapper"/>
                                </properties>
                            </activityConfig>
                        </bwext:BWActivity>
                    </tibex:config>
                </tibex:activityExtension>
            </bpws:extensionActivity>
            <bpws:extensionActivity>
                <tibex:extActivity inputVariable="GetTierCode-input"
                    name="GetTierCode" outputVariable="GetTierCode"
                    tibex:xpdlId="b22016ec-3f80-4881-afa8-72046f5c1a99"
                    type="bw.generalactivities.callprocess" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="Is-Valid-to-GetTierCode"/>
                    </bpws:targets>
                    <bpws:sources>
                        <bpws:source linkName="GetTierCode-to-Map-Data-Full-Cache"/>
                    </bpws:sources>
                    <tibex:inputBindings>
                        <tibex:inputBinding
                            expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://webservices.lms.ama.com/&quot; xmlns:pfx2=&quot;http://www.opentravel.org/OTA/2003/05&quot; xmlns:ns=&quot;http://www.tibco.com/pe/WriteToLogActivitySchema&quot; xmlns:pfx3=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:pfx4=&quot;http://www.copaair.com/schemas/trn/crm/passengerprofile&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:JSON=&quot;java://com.hp.tibco.bw.functions.json.JSON&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://www.tibco.com/namespaces/tnt/plugins/as&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:Utilities=&quot;java://Utilities&quot; xmlns:ansbw6=&quot;/crm/Processes/Util/GetTierCode-Start-Input.xsd&quot; xmlns:wsdl=&quot;http://schemas.xmlsoap.org/wsdl/&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://www.hp.com/schemas/services/exception&quot; xmlns:StringUtil=&quot;java://com.hp.tibco.bw.functions.string.StringFunctions&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;getProfileFromAmadeus&quot;/>&#xa;    &lt;xsl:template name=&quot;GetTierCode-Input&quot; match=&quot;/&quot;>&#xa;        &lt;ansbw6:root>&#xa;            &lt;softCode>&#xa;                &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/memberCard/tier&quot;/>&#xa;            &lt;/softCode>&#xa;        &lt;/ansbw6:root>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                    </tibex:inputBindings>
                    <tibex:CallProcess subProcessName="Util.GetTierCode" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"/>
                </tibex:extActivity>
            </bpws:extensionActivity>
            <bpws:extensionActivity>
                <tibex:activityExtension
                    inputVariable="Map-Data-Full-Cache-input"
                    name="Map-Data-Full-Cache"
                    outputVariable="Map-Data-Full-Cache"
                    tibex:xpdlId="f61371af-e904-4163-b44d-7487c488edb1" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="Map-Related-Traveler-Cache-to-Map-Data-Full-Cache"/>
                        <bpws:target linkName="Is-Valid-to-Map-Data-Full-Cache"/>
                        <bpws:target linkName="GetTierCode-to-Map-Data-Full-Cache"/>
                    </bpws:targets>
                    <bpws:sources>
                        <bpws:source linkName="Map-Data-Full-Cache-to-save-Cache"/>
                    </bpws:sources>
                    <tibex:inputBindings>
                        <tibex:inputBinding
                            expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx2=&quot;http://www.opentravel.org/OTA/2003/05&quot; xmlns:pfx4=&quot;http://www.copaair.com/schemas/trn/crm/passengerprofile&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;PassengerProfile-Constants-Service-Profile-PreAssigned&quot;/>&#xa;    &lt;xsl:param name=&quot;PassengerProfile-Constants-Service-Profile-Found&quot;/>&#xa;    &lt;xsl:param name=&quot;PassengerProfile-Constants-Service-Profile-ProcessStatus-Success&quot;/>&#xa;    &lt;xsl:param name=&quot;GetTierCode&quot;/>&#xa;    &lt;xsl:param name=&quot;PassengerProfile-Constants-Service-Profile-ProgramID&quot;/>&#xa;    &lt;xsl:param name=&quot;Map-Related-Traveler-Cache&quot;/>&#xa;    &lt;xsl:param name=&quot;getProfileFromAmadeus&quot;/>&#xa;    &lt;xsl:param name=&quot;Start&quot;/>&#xa;    &lt;xsl:template name=&quot;Map-Data-Full-Cache-Input&quot; match=&quot;/&quot;>&#xa;        &lt;pfx2:OTA_ProfileReadRS>&#xa;            &lt;xsl:attribute name=&quot;Version&quot;>&#xa;                &lt;xsl:value-of select=&quot;$Start/pfx2:OTA_ReadRQ/@Version&quot;/>&#xa;            &lt;/xsl:attribute>&#xa;            &lt;pfx2:Success/>&#xa;            &lt;pfx2:Profiles>&#xa;                &lt;pfx2:ProfileInfo>&#xa;                    &lt;pfx2:Profile>&#xa;                        &lt;xsl:choose>&#xa;                            &lt;xsl:when test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/memberType = &amp;quot;IN&amp;quot;&quot;>&#xa;                                &lt;xsl:attribute name=&quot;ProfileType&quot;>&#xa;                                    &lt;xsl:value-of select=&quot;&amp;quot;1&amp;quot;&quot;/>&#xa;                                &lt;/xsl:attribute>&#xa;                            &lt;/xsl:when>&#xa;                            &lt;xsl:when test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/memberType = &amp;quot;CO&amp;quot;&quot;>&#xa;                                &lt;xsl:attribute name=&quot;ProfileType&quot;>&#xa;                                    &lt;xsl:value-of select=&quot;&amp;quot;2&amp;quot;&quot;/>&#xa;                                &lt;/xsl:attribute>&#xa;                            &lt;/xsl:when>&#xa;                            &lt;xsl:otherwise/>&#xa;                        &lt;/xsl:choose>&#xa;                        &lt;pfx2:Customer>&#xa;                            &lt;xsl:choose>&#xa;                                &lt;xsl:when test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/gender = &amp;quot;M&amp;quot;&quot;>&#xa;                                    &lt;xsl:attribute name=&quot;Gender&quot;>&#xa;                                        &lt;xsl:value-of select=&quot;&amp;quot;Male&amp;quot;&quot;/>&#xa;                                    &lt;/xsl:attribute>&#xa;                                &lt;/xsl:when>&#xa;                                &lt;xsl:when test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/gender = &amp;quot;F&amp;quot;&quot;>&#xa;                                    &lt;xsl:attribute name=&quot;Gender&quot;>&#xa;                                        &lt;xsl:value-of select=&quot;&amp;quot;Female&amp;quot;&quot;/>&#xa;                                    &lt;/xsl:attribute>&#xa;                                &lt;/xsl:when>&#xa;                                &lt;xsl:otherwise/>&#xa;                            &lt;/xsl:choose>&#xa;                            &lt;xsl:attribute name=&quot;BirthDate&quot;>&#xa;                                &lt;xsl:value-of select=&quot;tib:create-date(year-from-date($getProfileFromAmadeus/retrieveMemberResponse/birthDate), month-from-date($getProfileFromAmadeus/retrieveMemberResponse/birthDate), day-from-date($getProfileFromAmadeus/retrieveMemberResponse/birthDate))&quot;/>&#xa;                            &lt;/xsl:attribute>&#xa;                            &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/commLanguage&quot;>&#xa;                                &lt;xsl:attribute name=&quot;Language&quot;>&#xa;                                    &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/commLanguage&quot;/>&#xa;                                &lt;/xsl:attribute>&#xa;                            &lt;/xsl:if>&#xa;                            &lt;xsl:choose>&#xa;                                &lt;xsl:when test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/maritalStatus = &amp;quot;M&amp;quot;&quot;>&#xa;                                    &lt;xsl:attribute name=&quot;MaritalStatus&quot;>&#xa;                                        &lt;xsl:value-of select=&quot;&amp;quot;Married&amp;quot;&quot;/>&#xa;                                    &lt;/xsl:attribute>&#xa;                                &lt;/xsl:when>&#xa;                                &lt;xsl:when test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/maritalStatus = &amp;quot;S&amp;quot;&quot;>&#xa;                                    &lt;xsl:attribute name=&quot;MaritalStatus&quot;>&#xa;                                        &lt;xsl:value-of select=&quot;&amp;quot;Single&amp;quot;&quot;/>&#xa;                                    &lt;/xsl:attribute>&#xa;                                &lt;/xsl:when>&#xa;                                &lt;xsl:otherwise>&#xa;                                    &lt;xsl:attribute name=&quot;MaritalStatus&quot;>&#xa;                                        &lt;xsl:value-of select=&quot;&amp;quot;Unknown&amp;quot;&quot;/>&#xa;                                    &lt;/xsl:attribute>&#xa;                                &lt;/xsl:otherwise>&#xa;                            &lt;/xsl:choose>&#xa;                            &lt;pfx2:PersonName>&#xa;                                &lt;xsl:attribute name=&quot;DefaultInd&quot;>&#xa;                                    &lt;xsl:value-of select=&quot;true()&quot;/>&#xa;                                &lt;/xsl:attribute>&#xa;                                &lt;xsl:if test=&quot;string-length(tib:trim($getProfileFromAmadeus/retrieveMemberResponse/prefixName)) > 0&quot;>&#xa;                                    &lt;pfx2:NamePrefix>&#xa;                                        &lt;xsl:value-of select=&quot;tib:trim($getProfileFromAmadeus/retrieveMemberResponse/prefixName)&quot;/>&#xa;                                    &lt;/pfx2:NamePrefix>&#xa;                                &lt;/xsl:if>&#xa;                                &lt;xsl:if test=&quot;string-length(tib:trim($getProfileFromAmadeus/retrieveMemberResponse/name)) > 0&quot;>&#xa;                                    &lt;pfx2:GivenName>&#xa;                                        &lt;xsl:value-of select=&quot;substring(tib:trim($getProfileFromAmadeus/retrieveMemberResponse/name), 1, 64)&quot;/>&#xa;                                    &lt;/pfx2:GivenName>&#xa;                                &lt;/xsl:if>&#xa;                                &lt;xsl:if test=&quot;string-length(tib:trim($getProfileFromAmadeus/retrieveMemberResponse/middleName)) > 0&quot;>&#xa;                                    &lt;pfx2:MiddleName>&#xa;                                        &lt;xsl:value-of select=&quot;tib:trim($getProfileFromAmadeus/retrieveMemberResponse/middleName)&quot;/>&#xa;                                    &lt;/pfx2:MiddleName>&#xa;                                &lt;/xsl:if>&#xa;                                &lt;xsl:choose>&#xa;                                    &lt;xsl:when test=&quot;string-length($getProfileFromAmadeus/retrieveMemberResponse/surname) > 0&quot;>&#xa;                                        &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/surname&quot;>&#xa;                                            &lt;pfx2:Surname>&#xa;                                                &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/surname&quot;/>&#xa;                                            &lt;/pfx2:Surname>&#xa;                                        &lt;/xsl:if>&#xa;                                    &lt;/xsl:when>&#xa;                                    &lt;xsl:otherwise>&#xa;                                        &lt;pfx2:Surname>&#xa;                                            &lt;xsl:value-of select=&quot;&amp;quot; &amp;quot;&quot;/>&#xa;                                        &lt;/pfx2:Surname>&#xa;                                    &lt;/xsl:otherwise>&#xa;                                &lt;/xsl:choose>&#xa;                                &lt;xsl:if test=&quot;string-length(tib:trim($getProfileFromAmadeus/retrieveMemberResponse/suffix)) > 0&quot;>&#xa;                                    &lt;pfx2:NameSuffix>&#xa;                                        &lt;xsl:value-of select=&quot;tib:trim($getProfileFromAmadeus/retrieveMemberResponse/suffix)&quot;/>&#xa;                                    &lt;/pfx2:NameSuffix>&#xa;                                &lt;/xsl:if>&#xa;                                &lt;xsl:if test=&quot;string-length(tib:trim($getProfileFromAmadeus/retrieveMemberResponse/titleName)) > 0&quot;>&#xa;                                    &lt;pfx2:NameTitle>&#xa;                                        &lt;xsl:value-of select=&quot;tib:trim($getProfileFromAmadeus/retrieveMemberResponse/titleName)&quot;/>&#xa;                                    &lt;/pfx2:NameTitle>&#xa;                                &lt;/xsl:if>&#xa;                            &lt;/pfx2:PersonName>&#xa;                            &lt;xsl:if test=&quot;string-length($getProfileFromAmadeus/retrieveMemberResponse/nickName) > 0&quot;>&#xa;                                &lt;pfx2:PersonName>&#xa;                                    &lt;xsl:attribute name=&quot;NameType&quot;>&#xa;                                        &lt;xsl:value-of select=&quot;2&quot;/>&#xa;                                    &lt;/xsl:attribute>&#xa;                                    &lt;xsl:attribute name=&quot;DefaultInd&quot;>&#xa;                                        &lt;xsl:value-of select=&quot;false()&quot;/>&#xa;                                    &lt;/xsl:attribute>&#xa;                                    &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/nickName&quot;>&#xa;                                        &lt;pfx2:Surname>&#xa;                                            &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/nickName&quot;/>&#xa;                                        &lt;/pfx2:Surname>&#xa;                                    &lt;/xsl:if>&#xa;                                &lt;/pfx2:PersonName>&#xa;                            &lt;/xsl:if>&#xa;                            &lt;xsl:if test=&quot;count($getProfileFromAmadeus/retrieveMemberResponse/phones) > 0&quot;>&#xa;                                &lt;xsl:for-each select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/phones&quot;>&#xa;                                    &lt;pfx2:Telephone>&#xa;                                        &lt;xsl:if test=&quot;seqNo&quot;>&#xa;                                            &lt;xsl:attribute name=&quot;RPH&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;seqNo&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                        &lt;/xsl:if>&#xa;                                        &lt;xsl:choose>&#xa;                                            &lt;xsl:when test=&quot;phoneType = &amp;quot;HPH&amp;quot; or phoneType = &amp;quot;HFX&amp;quot;&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;PhoneLocationType&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;&amp;quot;6&amp;quot;&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:when>&#xa;                                            &lt;xsl:when test=&quot;phoneType = &amp;quot;BPH&amp;quot; or phoneType = &amp;quot;BFX&amp;quot;&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;PhoneLocationType&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;&amp;quot;7&amp;quot;&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:when>&#xa;                                            &lt;xsl:when test=&quot;phoneType = &amp;quot;CEL&amp;quot; or phoneType = &amp;quot;OFX&amp;quot;&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;PhoneLocationType&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;&amp;quot;8&amp;quot;&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:when>&#xa;                                        &lt;/xsl:choose>&#xa;                                        &lt;xsl:if test=&quot;string-length(tib:trim(phoneIntCode)) > 0&quot;>&#xa;                                            &lt;xsl:attribute name=&quot;CountryAccessCode&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;substring(tib:trim(phoneIntCode), 1, 3)&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                        &lt;/xsl:if>&#xa;                                        &lt;xsl:if test=&quot;string-length(tib:trim(phoneAreaCode)) > 0&quot;>&#xa;                                            &lt;xsl:attribute name=&quot;AreaCityCode&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;substring(tib:trim(phoneAreaCode), 1, 8)&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                        &lt;/xsl:if>&#xa;                                        &lt;xsl:attribute name=&quot;PhoneNumber&quot;>&#xa;                                            &lt;xsl:value-of select=&quot;phoneNumber&quot;/>&#xa;                                        &lt;/xsl:attribute>&#xa;                                        &lt;xsl:if test=&quot;string-length(tib:trim(phoneExt)) > 0 and (string(number(tib:trim(phoneExt))) != &amp;quot;NaN&amp;quot;)&quot;>&#xa;                                            &lt;xsl:attribute name=&quot;Extension&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;substring(tib:trim(phoneExt), 1, 5)&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                        &lt;/xsl:if>&#xa;                                        &lt;xsl:if test=&quot;string-length(tib:trim(phoneType)) > 0&quot;>&#xa;                                            &lt;xsl:attribute name=&quot;Remark&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;tib:trim(phoneType)&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                        &lt;/xsl:if>&#xa;                                        &lt;xsl:choose>&#xa;                                            &lt;xsl:when test=&quot;phonePreferred = &amp;quot;T&amp;quot;&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;DefaultInd&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;true()&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:when>&#xa;                                            &lt;xsl:otherwise>&#xa;                                                &lt;xsl:attribute name=&quot;DefaultInd&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;false()&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:otherwise>&#xa;                                        &lt;/xsl:choose>&#xa;                                        &lt;xsl:choose>&#xa;                                            &lt;xsl:when test=&quot;phoneType = &amp;quot;HPH&amp;quot; or phoneType = &amp;quot;BPH&amp;quot;&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;PhoneTechType&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;&amp;quot;1&amp;quot;&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:when>&#xa;                                            &lt;xsl:when test=&quot;phoneType = &amp;quot;CEL&amp;quot;&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;PhoneTechType&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;&amp;quot;5&amp;quot;&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:when>&#xa;                                            &lt;xsl:when test=&quot;phoneType = &amp;quot;BFX&amp;quot; or phoneType = &amp;quot;HFX&amp;quot; or phoneType = &amp;quot;OFX&amp;quot;&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;PhoneTechType&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;&amp;quot;3&amp;quot;&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:when>&#xa;                                        &lt;/xsl:choose>&#xa;                                    &lt;/pfx2:Telephone>&#xa;                                &lt;/xsl:for-each>&#xa;                            &lt;/xsl:if>&#xa;                            &lt;xsl:for-each select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/emails[emailPreferred = &amp;quot;T&amp;quot;]&quot;>&#xa;                                &lt;xsl:if test=&quot;emailAddress&quot;>&#xa;                                    &lt;pfx2:Email>&#xa;                                        &lt;xsl:choose>&#xa;                                            &lt;xsl:when test=&quot;emailPreferred = &amp;quot;T&amp;quot;&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;DefaultInd&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;true()&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:when>&#xa;                                            &lt;xsl:otherwise>&#xa;                                                &lt;xsl:attribute name=&quot;DefaultInd&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;false()&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:otherwise>&#xa;                                        &lt;/xsl:choose>&#xa;                                        &lt;xsl:choose>&#xa;                                            &lt;xsl:when test=&quot;emailType = &amp;quot;HOM&amp;quot;&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;EmailType&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;&amp;quot;1&amp;quot;&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:when>&#xa;                                            &lt;xsl:when test=&quot;emailType = &amp;quot;BUS&amp;quot;&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;EmailType&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;&amp;quot;2&amp;quot;&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:when>&#xa;                                        &lt;/xsl:choose>&#xa;                                        &lt;xsl:if test=&quot;seqNo&quot;>&#xa;                                            &lt;xsl:attribute name=&quot;RPH&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;seqNo&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                        &lt;/xsl:if>&#xa;                                        &lt;xsl:choose>&#xa;                                            &lt;xsl:when test=&quot;emailStatus = &amp;quot;T&amp;quot;&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;ValidInd&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;true()&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:when>&#xa;                                            &lt;xsl:otherwise>&#xa;                                                &lt;xsl:attribute name=&quot;ValidInd&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;false()&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:otherwise>&#xa;                                        &lt;/xsl:choose>&#xa;                                        &lt;xsl:if test=&quot;string-length(emailType) > 0&quot;>&#xa;                                            &lt;xsl:if test=&quot;emailType&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;Remark&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;emailType&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:if>&#xa;                                        &lt;/xsl:if>&#xa;                                        &lt;xsl:value-of select=&quot;emailAddress&quot;/>&#xa;                                    &lt;/pfx2:Email>&#xa;                                &lt;/xsl:if>&#xa;                            &lt;/xsl:for-each>&#xa;                            &lt;xsl:variable name=&quot;var2&quot; select=&quot;max($getProfileFromAmadeus/retrieveMemberResponse/address/seqNo)&quot;/>&#xa;                            &lt;xsl:for-each select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/address[seqNo = $var2]&quot;>&#xa;                                &lt;pfx2:Address>&#xa;                                    &lt;xsl:if test=&quot;language&quot;>&#xa;                                        &lt;xsl:attribute name=&quot;Language&quot;>&#xa;                                            &lt;xsl:value-of select=&quot;language&quot;/>&#xa;                                        &lt;/xsl:attribute>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:if test=&quot;seqNo&quot;>&#xa;                                        &lt;xsl:attribute name=&quot;RPH&quot;>&#xa;                                            &lt;xsl:value-of select=&quot;seqNo&quot;/>&#xa;                                        &lt;/xsl:attribute>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:choose>&#xa;                                        &lt;xsl:when test=&quot;status = &amp;quot;T&amp;quot;&quot;>&#xa;                                            &lt;xsl:attribute name=&quot;ValidInd&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;true()&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                        &lt;/xsl:when>&#xa;                                        &lt;xsl:otherwise>&#xa;                                            &lt;xsl:attribute name=&quot;ValidInd&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;false()&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                        &lt;/xsl:otherwise>&#xa;                                    &lt;/xsl:choose>&#xa;                                    &lt;xsl:choose>&#xa;                                        &lt;xsl:when test=&quot;preferred = &amp;quot;T&amp;quot;&quot;>&#xa;                                            &lt;xsl:attribute name=&quot;DefaultInd&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;true()&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                        &lt;/xsl:when>&#xa;                                        &lt;xsl:otherwise>&#xa;                                            &lt;xsl:attribute name=&quot;DefaultInd&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;false()&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                        &lt;/xsl:otherwise>&#xa;                                    &lt;/xsl:choose>&#xa;                                    &lt;xsl:choose>&#xa;                                        &lt;xsl:when test=&quot;addressType = &amp;quot;HOM&amp;quot;&quot;>&#xa;                                            &lt;xsl:attribute name=&quot;Type&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;&amp;quot;1&amp;quot;&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                        &lt;/xsl:when>&#xa;                                        &lt;xsl:when test=&quot;addressType = &amp;quot;BUS&amp;quot;&quot;>&#xa;                                            &lt;xsl:attribute name=&quot;Type&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;&amp;quot;2&amp;quot;&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                        &lt;/xsl:when>&#xa;                                    &lt;/xsl:choose>&#xa;                                    &lt;xsl:if test=&quot;string-length(tib:trim(addressType)) > 0&quot;>&#xa;                                        &lt;xsl:attribute name=&quot;Remark&quot;>&#xa;                                            &lt;xsl:value-of select=&quot;tib:trim(addressType)&quot;/>&#xa;                                        &lt;/xsl:attribute>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:if test=&quot;department&quot;>&#xa;                                        &lt;pfx2:BldgRoom>&#xa;                                            &lt;xsl:value-of select=&quot;department&quot;/>&#xa;                                        &lt;/pfx2:BldgRoom>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:if test=&quot;string-length(tib:trim(addressLine1)) > 0&quot;>&#xa;                                        &lt;pfx2:AddressLine>&#xa;                                            &lt;xsl:value-of select=&quot;tib:trim(addressLine1)&quot;/>&#xa;                                        &lt;/pfx2:AddressLine>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:if test=&quot;string-length(tib:trim(addressLine2)) > 0&quot;>&#xa;                                        &lt;pfx2:AddressLine>&#xa;                                            &lt;xsl:value-of select=&quot;tib:trim(addressLine2)&quot;/>&#xa;                                        &lt;/pfx2:AddressLine>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:if test=&quot;string-length(tib:trim(addressLine3)) > 0&quot;>&#xa;                                        &lt;pfx2:AddressLine>&#xa;                                            &lt;xsl:value-of select=&quot;tib:trim((addressLine3))&quot;/>&#xa;                                        &lt;/pfx2:AddressLine>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:if test=&quot;string-length(tib:trim(city)) > 0&quot;>&#xa;                                        &lt;pfx2:CityName>&#xa;                                            &lt;xsl:value-of select=&quot;tib:trim(city)&quot;/>&#xa;                                        &lt;/pfx2:CityName>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:if test=&quot;string-length(zipCode) > 0&quot;>&#xa;                                        &lt;pfx2:PostalCode>&#xa;                                            &lt;xsl:value-of select=&quot;substring(zipCode, 1, 16)&quot;/>&#xa;                                        &lt;/pfx2:PostalCode>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:if test=&quot;string-length(state) > 1&quot;>&#xa;                                        &lt;pfx2:StateProv>&#xa;                                            &lt;xsl:attribute name=&quot;StateCode&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;substring(state, 1, 8)&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                            &lt;xsl:value-of select=&quot;substring(state, 1, 8)&quot;/>&#xa;                                        &lt;/pfx2:StateProv>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:if test=&quot;string-length(country) > 0&quot;>&#xa;                                        &lt;xsl:if test=&quot;country&quot;>&#xa;                                            &lt;pfx2:CountryName>&#xa;                                                &lt;xsl:if test=&quot;country&quot;>&#xa;                                                    &lt;xsl:attribute name=&quot;Code&quot;>&#xa;                                                        &lt;xsl:value-of select=&quot;country&quot;/>&#xa;                                                    &lt;/xsl:attribute>&#xa;                                                &lt;/xsl:if>&#xa;                                                &lt;xsl:value-of select=&quot;country&quot;/>&#xa;                                            &lt;/pfx2:CountryName>&#xa;                                        &lt;/xsl:if>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:if test=&quot;string-length(tib:trim(company)) > 0&quot;>&#xa;                                        &lt;pfx2:CompanyName>&#xa;                                            &lt;xsl:value-of select=&quot;tib:trim(company)&quot;/>&#xa;                                        &lt;/pfx2:CompanyName>&#xa;                                    &lt;/xsl:if>&#xa;                                &lt;/pfx2:Address>&#xa;                            &lt;/xsl:for-each>&#xa;                            &lt;pfx2:CitizenCountryName>&#xa;                                &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/nationality&quot;>&#xa;                                    &lt;xsl:attribute name=&quot;Code&quot;>&#xa;                                        &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/nationality&quot;/>&#xa;                                    &lt;/xsl:attribute>&#xa;                                &lt;/xsl:if>&#xa;                            &lt;/pfx2:CitizenCountryName>&#xa;                            &lt;xsl:if test=&quot;exists($Map-Related-Traveler-Cache)&quot;>&#xa;                                &lt;pfx2:RelatedTraveler>&#xa;                                    &lt;pfx2:UniqueID>&#xa;                                        &lt;xsl:attribute name=&quot;Type&quot;>&#xa;                                            &lt;xsl:value-of select=&quot;&amp;quot;0&amp;quot;&quot;/>&#xa;                                        &lt;/xsl:attribute>&#xa;                                        &lt;xsl:attribute name=&quot;ID&quot;>&#xa;                                            &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/nominees[1]/seqNo&quot;/>&#xa;                                        &lt;/xsl:attribute>&#xa;                                    &lt;/pfx2:UniqueID>&#xa;                                    &lt;pfx2:TPA_Extensions>&#xa;                                        &lt;xsl:copy-of select=&quot;$Map-Related-Traveler-Cache/pfx2:Profiles&quot;/>&#xa;                                    &lt;/pfx2:TPA_Extensions>&#xa;                                &lt;/pfx2:RelatedTraveler>&#xa;                            &lt;/xsl:if>&#xa;                            &lt;xsl:for-each select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/memberDocs&quot;>&#xa;                                &lt;pfx2:Document>&#xa;                                    &lt;xsl:if test=&quot;string-length(tib:trim(issuingCountry)) > 0&quot;>&#xa;                                        &lt;xsl:attribute name=&quot;DocIssueLocation&quot;>&#xa;                                            &lt;xsl:value-of select=&quot;tib:trim(issuingCountry)&quot;/>&#xa;                                        &lt;/xsl:attribute>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:if test=&quot;string-length(tib:trim(documentId)) > 0&quot;>&#xa;                                        &lt;xsl:attribute name=&quot;DocID&quot;>&#xa;                                            &lt;xsl:value-of select=&quot;tib:trim(documentId)&quot;/>&#xa;                                        &lt;/xsl:attribute>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:choose>&#xa;                                        &lt;xsl:when test=&quot;documentType = &amp;quot;PASSPORT&amp;quot;&quot;>&#xa;                                            &lt;xsl:attribute name=&quot;DocType&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;2&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                        &lt;/xsl:when>&#xa;                                        &lt;xsl:when test=&quot;documentType = &amp;quot;DRIVING_LICENSE&amp;quot;&quot;>&#xa;                                            &lt;xsl:attribute name=&quot;DocType&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;4&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                        &lt;/xsl:when>&#xa;                                        &lt;xsl:when test=&quot;documentType = &amp;quot;NATIONAL_ID&amp;quot;&quot;>&#xa;                                            &lt;xsl:attribute name=&quot;DocType&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;5&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                        &lt;/xsl:when>&#xa;                                        &lt;xsl:when test=&quot;documentType = &amp;quot;SOCIAL_SECURITY&amp;quot;&quot;>&#xa;                                            &lt;xsl:attribute name=&quot;DocType&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;100&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                        &lt;/xsl:when>&#xa;                                        &lt;xsl:otherwise>&#xa;                                            &lt;xsl:attribute name=&quot;DocType&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;17&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                        &lt;/xsl:otherwise>&#xa;                                    &lt;/xsl:choose>&#xa;                                    &lt;xsl:if test=&quot;string-length(tib:trim(validFrom)) > 0&quot;>&#xa;                                        &lt;xsl:attribute name=&quot;EffectiveDate&quot;>&#xa;                                            &lt;xsl:value-of select=&quot;tib:create-date(year-from-date(validFrom), month-from-date(validFrom), day-from-date(validFrom))&quot;/>&#xa;                                        &lt;/xsl:attribute>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:if test=&quot;string-length(tib:trim(validUntil)) > 0&quot;>&#xa;                                        &lt;xsl:attribute name=&quot;ExpireDate&quot;>&#xa;                                            &lt;xsl:value-of select=&quot;tib:create-date(year-from-date(validUntil), month-from-date(validUntil), day-from-date(validUntil))&quot;/>&#xa;                                        &lt;/xsl:attribute>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:if test=&quot;string-length(tib:trim(documentType)) > 0&quot;>&#xa;                                        &lt;xsl:if test=&quot;documentType&quot;>&#xa;                                            &lt;xsl:attribute name=&quot;Remark&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;documentType&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                        &lt;/xsl:if>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;pfx2:TPA_Extensions>&#xa;                                        &lt;pfx4:CopaDocumentExt>&#xa;                                            &lt;xsl:if test=&quot;seqNo&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;RPH&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;seqNo&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:if>&#xa;                                        &lt;/pfx4:CopaDocumentExt>&#xa;                                    &lt;/pfx2:TPA_Extensions>&#xa;                                &lt;/pfx2:Document>&#xa;                            &lt;/xsl:for-each>&#xa;                            &lt;xsl:for-each select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/simpleContent[key = &amp;quot;REDRESS_NUMBER&amp;quot;]&quot;>&#xa;                                &lt;xsl:if test=&quot;string-length(value) > 0&quot;>&#xa;                                    &lt;pfx2:Document>&#xa;                                        &lt;xsl:if test=&quot;value&quot;>&#xa;                                            &lt;xsl:attribute name=&quot;DocID&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;value&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                        &lt;/xsl:if>&#xa;                                        &lt;xsl:attribute name=&quot;DocType&quot;>&#xa;                                            &lt;xsl:value-of select=&quot;15&quot;/>&#xa;                                        &lt;/xsl:attribute>&#xa;                                        &lt;xsl:if test=&quot;key&quot;>&#xa;                                            &lt;xsl:attribute name=&quot;Remark&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;key&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                        &lt;/xsl:if>&#xa;                                    &lt;/pfx2:Document>&#xa;                                &lt;/xsl:if>&#xa;                            &lt;/xsl:for-each>&#xa;                            &lt;pfx2:CustLoyalty>&#xa;                                &lt;xsl:attribute name=&quot;ProgramID&quot;>&#xa;                                    &lt;xsl:value-of select=&quot;$PassengerProfile-Constants-Service-Profile-ProgramID&quot;/>&#xa;                                &lt;/xsl:attribute>&#xa;                                &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/id&quot;>&#xa;                                    &lt;xsl:attribute name=&quot;MembershipID&quot;>&#xa;                                        &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/id&quot;/>&#xa;                                    &lt;/xsl:attribute>&#xa;                                &lt;/xsl:if>&#xa;                                &lt;xsl:if test=&quot;string-length($getProfileFromAmadeus/retrieveMemberResponse/startDate) > 0&quot;>&#xa;                                    &lt;xsl:attribute name=&quot;SignupDate&quot;>&#xa;                                        &lt;xsl:value-of select=&quot;tib:create-date(year-from-date($getProfileFromAmadeus/retrieveMemberResponse/startDate), month-from-date($getProfileFromAmadeus/retrieveMemberResponse/startDate), day-from-date($getProfileFromAmadeus/retrieveMemberResponse/startDate))&quot;/>&#xa;                                    &lt;/xsl:attribute>&#xa;                                &lt;/xsl:if>&#xa;                                &lt;xsl:if test=&quot;string-length($getProfileFromAmadeus/retrieveMemberResponse/memberCard/validFrom) > 0&quot;>&#xa;                                    &lt;xsl:attribute name=&quot;EffectiveDate&quot;>&#xa;                                        &lt;xsl:value-of select=&quot;tib:create-date(year-from-date($getProfileFromAmadeus/retrieveMemberResponse/memberCard/validFrom), month-from-date($getProfileFromAmadeus/retrieveMemberResponse/memberCard/validFrom), day-from-date($getProfileFromAmadeus/retrieveMemberResponse/memberCard/validFrom))&quot;/>&#xa;                                    &lt;/xsl:attribute>&#xa;                                &lt;/xsl:if>&#xa;                                &lt;xsl:if test=&quot;string-length($getProfileFromAmadeus/retrieveMemberResponse/memberCard/validUntil) > 0&quot;>&#xa;                                    &lt;xsl:attribute name=&quot;ExpireDate&quot;>&#xa;                                        &lt;xsl:value-of select=&quot;tib:create-date(year-from-date($getProfileFromAmadeus/retrieveMemberResponse/memberCard/validUntil), month-from-date($getProfileFromAmadeus/retrieveMemberResponse/memberCard/validUntil), day-from-date($getProfileFromAmadeus/retrieveMemberResponse/memberCard/validUntil))&quot;/>&#xa;                                    &lt;/xsl:attribute>&#xa;                                &lt;/xsl:if>&#xa;                                &lt;xsl:if test=&quot;string-length(tib:trim($GetTierCode/description))&quot;>&#xa;                                    &lt;xsl:attribute name=&quot;LoyalLevel&quot;>&#xa;                                        &lt;xsl:value-of select=&quot;tib:trim($GetTierCode/description)&quot;/>&#xa;                                    &lt;/xsl:attribute>&#xa;                                &lt;/xsl:if>&#xa;                                &lt;pfx2:SubAccountBalance>&#xa;                                    &lt;xsl:attribute name=&quot;Balance&quot;>&#xa;                                        &lt;xsl:value-of select=&quot;round($getProfileFromAmadeus/retrieveMemberResponse/memberCard/awardMiles)&quot;/>&#xa;                                    &lt;/xsl:attribute>&#xa;                                &lt;/pfx2:SubAccountBalance>&#xa;                            &lt;/pfx2:CustLoyalty>&#xa;                            &lt;xsl:for-each select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/simpleContent[starts-with(key, &amp;quot;OTHER_LOYALTY_NUM&amp;quot;)]&quot;>&#xa;                                &lt;pfx2:CustLoyalty>&#xa;                                    &lt;xsl:variable name=&quot;varKey&quot; select=&quot;key&quot;/>&#xa;                                    &lt;xsl:variable name=&quot;var&quot; select=&quot;concat(substring-before($varKey, &amp;quot; _NUM&amp;quot;), substring-after($varKey, &amp;quot;_NUM&amp;quot;))&quot;/>&#xa;                                    &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/simpleContent[key = $var]/value&quot;>&#xa;                                        &lt;xsl:attribute name=&quot;ProgramID&quot;>&#xa;                                            &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/simpleContent[key = $var]/value&quot;/>&#xa;                                        &lt;/xsl:attribute>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:if test=&quot;value&quot;>&#xa;                                        &lt;xsl:attribute name=&quot;MembershipID&quot;>&#xa;                                            &lt;xsl:value-of select=&quot;value&quot;/>&#xa;                                        &lt;/xsl:attribute>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;pfx2:SubAccountBalance>&#xa;                                        &lt;xsl:attribute name=&quot;Balance&quot;>&#xa;                                            &lt;xsl:value-of select=&quot;round($getProfileFromAmadeus/retrieveMemberResponse/memberCard/awardMiles)&quot;/>&#xa;                                        &lt;/xsl:attribute>&#xa;                                    &lt;/pfx2:SubAccountBalance>&#xa;                                &lt;/pfx2:CustLoyalty>&#xa;                            &lt;/xsl:for-each>&#xa;                            &lt;pfx2:TPA_Extensions>&#xa;                                &lt;pfx4:CopaProfileExt>&#xa;                                    &lt;xsl:choose>&#xa;                                        &lt;xsl:when test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/processCode = $PassengerProfile-Constants-Service-Profile-ProcessStatus-Success&quot;>&#xa;                                            &lt;pfx4:ProfileProcessStatus>&#xa;                                                &lt;xsl:value-of select=&quot;$PassengerProfile-Constants-Service-Profile-Found&quot;/>&#xa;                                            &lt;/pfx4:ProfileProcessStatus>&#xa;                                        &lt;/xsl:when>&#xa;                                        &lt;xsl:otherwise>&#xa;                                            &lt;pfx4:ProfileProcessStatus>&#xa;                                                &lt;xsl:value-of select=&quot;$PassengerProfile-Constants-Service-Profile-PreAssigned&quot;/>&#xa;                                            &lt;/pfx4:ProfileProcessStatus>&#xa;                                        &lt;/xsl:otherwise>&#xa;                                    &lt;/xsl:choose>&#xa;                                    &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/id&quot;>&#xa;                                        &lt;pfx4:FrequentFlyerNumber>&#xa;                                            &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/id&quot;/>&#xa;                                        &lt;/pfx4:FrequentFlyerNumber>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/userName&quot;>&#xa;                                        &lt;pfx4:UserName>&#xa;                                            &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/userName&quot;/>&#xa;                                        &lt;/pfx4:UserName>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/status&quot;>&#xa;                                        &lt;pfx4:Status>&#xa;                                            &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/status&quot;/>&#xa;                                        &lt;/pfx4:Status>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/title&quot;>&#xa;                                        &lt;pfx4:Title>&#xa;                                            &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/title&quot;/>&#xa;                                        &lt;/pfx4:Title>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/prefix&quot;>&#xa;                                        &lt;pfx4:Prefix>&#xa;                                            &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/prefix&quot;/>&#xa;                                        &lt;/pfx4:Prefix>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/marriageDate&quot;>&#xa;                                        &lt;pfx4:MarriageDate>&#xa;                                            &lt;xsl:value-of select=&quot;tib:create-date(year-from-date($getProfileFromAmadeus/retrieveMemberResponse/marriageDate), month-from-date($getProfileFromAmadeus/retrieveMemberResponse/marriageDate), day-from-date($getProfileFromAmadeus/retrieveMemberResponse/marriageDate))&quot;/>&#xa;                                        &lt;/pfx4:MarriageDate>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/sourceCode&quot;>&#xa;                                        &lt;pfx4:EnrollmentSource>&#xa;                                            &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/sourceCode&quot;/>&#xa;                                        &lt;/pfx4:EnrollmentSource>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/referringMemberId&quot;>&#xa;                                        &lt;pfx4:ReferringMemberID>&#xa;                                            &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/referringMemberId&quot;/>&#xa;                                        &lt;/pfx4:ReferringMemberID>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/nameOnCard&quot;>&#xa;                                        &lt;pfx4:NameOnCard>&#xa;                                            &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/nameOnCard&quot;/>&#xa;                                        &lt;/pfx4:NameOnCard>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/placeOfBirth&quot;>&#xa;                                        &lt;pfx4:PlaceOfBirth>&#xa;                                            &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/placeOfBirth&quot;/>&#xa;                                        &lt;/pfx4:PlaceOfBirth>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/jobTitle&quot;>&#xa;                                        &lt;pfx4:JobTitle>&#xa;                                            &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/jobTitle&quot;/>&#xa;                                        &lt;/pfx4:JobTitle>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/address[1]/poBox&quot;>&#xa;                                        &lt;pfx4:PO_Box>&#xa;                                            &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/address[1]/poBox&quot;/>&#xa;                                        &lt;/pfx4:PO_Box>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;pfx4:Loyalty>&#xa;                                        &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/memberCard/qualifyingMiles&quot;>&#xa;                                            &lt;pfx4:QualifyingMiles>&#xa;                                                &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/memberCard/qualifyingMiles&quot;/>&#xa;                                            &lt;/pfx4:QualifyingMiles>&#xa;                                        &lt;/xsl:if>&#xa;                                        &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/memberCard/qualifyingSectors&quot;>&#xa;                                            &lt;pfx4:QualifyingSectors>&#xa;                                                &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/memberCard/qualifyingSectors&quot;/>&#xa;                                            &lt;/pfx4:QualifyingSectors>&#xa;                                        &lt;/xsl:if>&#xa;                                        &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/memberCard/totalAwardMilesSinceEnrollment&quot;>&#xa;                                            &lt;pfx4:TotalAwardMilesSinceEnrollment>&#xa;                                                &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/memberCard/totalAwardMilesSinceEnrollment&quot;/>&#xa;                                            &lt;/pfx4:TotalAwardMilesSinceEnrollment>&#xa;                                        &lt;/xsl:if>&#xa;                                        &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/memberCard/totalQualifyingMilesSinceEnrollment&quot;>&#xa;                                            &lt;pfx4:TotalQualifyingMilesSinceEnrollment>&#xa;                                                &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/memberCard/totalQualifyingMilesSinceEnrollment&quot;/>&#xa;                                            &lt;/pfx4:TotalQualifyingMilesSinceEnrollment>&#xa;                                        &lt;/xsl:if>&#xa;                                        &lt;pfx4:TierCode>&#xa;                                            &lt;xsl:value-of select=&quot;$GetTierCode/hardCode&quot;/>&#xa;                                        &lt;/pfx4:TierCode>&#xa;                                        &lt;pfx4:SoftTierCode>&#xa;                                            &lt;xsl:value-of select=&quot;$GetTierCode/softCode&quot;/>&#xa;                                        &lt;/pfx4:SoftTierCode>&#xa;                                    &lt;/pfx4:Loyalty>&#xa;                                    &lt;xsl:if test=&quot;count($getProfileFromAmadeus/retrieveMemberResponse/simpleContent) > 0&quot;>&#xa;                                        &lt;pfx4:Extensions>&#xa;                                            &lt;xsl:for-each select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/simpleContent&quot;>&#xa;                                                &lt;pfx4:Extension>&#xa;                                                    &lt;xsl:if test=&quot;key&quot;>&#xa;                                                        &lt;pfx4:Name>&#xa;                                                            &lt;xsl:value-of select=&quot;key&quot;/>&#xa;                                                        &lt;/pfx4:Name>&#xa;                                                    &lt;/xsl:if>&#xa;                                                    &lt;xsl:if test=&quot;value&quot;>&#xa;                                                        &lt;pfx4:Value>&#xa;                                                            &lt;xsl:value-of select=&quot;value&quot;/>&#xa;                                                        &lt;/pfx4:Value>&#xa;                                                    &lt;/xsl:if>&#xa;                                                &lt;/pfx4:Extension>&#xa;                                            &lt;/xsl:for-each>&#xa;                                        &lt;/pfx4:Extensions>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;pfx4:Consents>&#xa;                                        &lt;pfx4:Consent>&#xa;                                            &lt;pfx4:Name>&#xa;                                                &lt;xsl:value-of select=&quot;&amp;quot;consentEstatement&amp;quot;&quot;/>&#xa;                                            &lt;/pfx4:Name>&#xa;                                            &lt;pfx4:Value>&#xa;                                                &lt;xsl:value-of select=&quot;if ($getProfileFromAmadeus/retrieveMemberResponse/consent/consentEstatement = &amp;quot;T&amp;quot;) then true() else false()&quot;/>&#xa;                                            &lt;/pfx4:Value>&#xa;                                        &lt;/pfx4:Consent>&#xa;                                        &lt;pfx4:Consent>&#xa;                                            &lt;pfx4:Name>&#xa;                                                &lt;xsl:value-of select=&quot;&amp;quot;consentEmailPartner&amp;quot;&quot;/>&#xa;                                            &lt;/pfx4:Name>&#xa;                                            &lt;pfx4:Value>&#xa;                                                &lt;xsl:value-of select=&quot;if ($getProfileFromAmadeus/retrieveMemberResponse/consent/consentEmailPartner = &amp;quot;T&amp;quot;) then true() else false()&quot;/>&#xa;                                            &lt;/pfx4:Value>&#xa;                                        &lt;/pfx4:Consent>&#xa;                                        &lt;pfx4:Consent>&#xa;                                            &lt;pfx4:Name>&#xa;                                                &lt;xsl:value-of select=&quot;&amp;quot;consentEmailFfpDepartment&amp;quot;&quot;/>&#xa;                                            &lt;/pfx4:Name>&#xa;                                            &lt;pfx4:Value>&#xa;                                                &lt;xsl:value-of select=&quot;if ($getProfileFromAmadeus/retrieveMemberResponse/consent/consentEmailFfpDepartment = &amp;quot;T&amp;quot;) then true() else false()&quot;/>&#xa;                                            &lt;/pfx4:Value>&#xa;                                        &lt;/pfx4:Consent>&#xa;                                        &lt;pfx4:Consent>&#xa;                                            &lt;pfx4:Name>&#xa;                                                &lt;xsl:value-of select=&quot;&amp;quot;consentFax&amp;quot;&quot;/>&#xa;                                            &lt;/pfx4:Name>&#xa;                                            &lt;pfx4:Value>&#xa;                                                &lt;xsl:value-of select=&quot;if ($getProfileFromAmadeus/retrieveMemberResponse/consent/consentFax = &amp;quot;T&amp;quot;) then true() else false()&quot;/>&#xa;                                            &lt;/pfx4:Value>&#xa;                                        &lt;/pfx4:Consent>&#xa;                                        &lt;pfx4:Consent>&#xa;                                            &lt;pfx4:Name>&#xa;                                                &lt;xsl:value-of select=&quot;&amp;quot;consentMailFfpDepartment&amp;quot;&quot;/>&#xa;                                            &lt;/pfx4:Name>&#xa;                                            &lt;pfx4:Value>&#xa;                                                &lt;xsl:value-of select=&quot;if ($getProfileFromAmadeus/retrieveMemberResponse/consent/consentMailFfpDepartment = &amp;quot;T&amp;quot;) then true() else false()&quot;/>&#xa;                                            &lt;/pfx4:Value>&#xa;                                        &lt;/pfx4:Consent>&#xa;                                        &lt;pfx4:Consent>&#xa;                                            &lt;pfx4:Name>&#xa;                                                &lt;xsl:value-of select=&quot;&amp;quot;consentMailPartner&amp;quot;&quot;/>&#xa;                                            &lt;/pfx4:Name>&#xa;                                            &lt;pfx4:Value>&#xa;                                                &lt;xsl:value-of select=&quot;if ($getProfileFromAmadeus/retrieveMemberResponse/consent/consentMailPartner = &amp;quot;T&amp;quot;) then true() else false()&quot;/>&#xa;                                            &lt;/pfx4:Value>&#xa;                                        &lt;/pfx4:Consent>&#xa;                                        &lt;pfx4:Consent>&#xa;                                            &lt;pfx4:Name>&#xa;                                                &lt;xsl:value-of select=&quot;&amp;quot;consentSms&amp;quot;&quot;/>&#xa;                                            &lt;/pfx4:Name>&#xa;                                            &lt;pfx4:Value>&#xa;                                                &lt;xsl:value-of select=&quot;if ($getProfileFromAmadeus/retrieveMemberResponse/consent/consentSms = &amp;quot;T&amp;quot;) then true() else false()&quot;/>&#xa;                                            &lt;/pfx4:Value>&#xa;                                        &lt;/pfx4:Consent>&#xa;                                    &lt;/pfx4:Consents>&#xa;                                    &lt;xsl:if test=&quot;count($getProfileFromAmadeus/retrieveMemberResponse/preference) > 0&quot;>&#xa;                                        &lt;pfx4:Preferences>&#xa;                                            &lt;xsl:for-each select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/preference&quot;>&#xa;                                                &lt;pfx4:Preference>&#xa;                                                    &lt;xsl:if test=&quot;string-length(seqNo) > 0&quot;>&#xa;                                                        &lt;xsl:if test=&quot;seqNo&quot;>&#xa;                                                            &lt;xsl:attribute name=&quot;RPH&quot;>&#xa;                                                                &lt;xsl:value-of select=&quot;seqNo&quot;/>&#xa;                                                            &lt;/xsl:attribute>&#xa;                                                        &lt;/xsl:if>&#xa;                                                    &lt;/xsl:if>&#xa;                                                    &lt;xsl:if test=&quot;preferenceType&quot;>&#xa;                                                        &lt;pfx4:Name>&#xa;                                                            &lt;xsl:value-of select=&quot;preferenceType&quot;/>&#xa;                                                        &lt;/pfx4:Name>&#xa;                                                    &lt;/xsl:if>&#xa;                                                    &lt;xsl:if test=&quot;preferenceValue&quot;>&#xa;                                                        &lt;pfx4:Value>&#xa;                                                            &lt;xsl:value-of select=&quot;preferenceValue&quot;/>&#xa;                                                        &lt;/pfx4:Value>&#xa;                                                    &lt;/xsl:if>&#xa;                                                &lt;/pfx4:Preference>&#xa;                                            &lt;/xsl:for-each>&#xa;                                        &lt;/pfx4:Preferences>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;pfx4:Accounts>&#xa;                                        &lt;xsl:for-each select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/accounts&quot;>&#xa;                                            &lt;pfx4:Account>&#xa;                                                &lt;xsl:if test=&quot;actionType&quot;>&#xa;                                                    &lt;pfx4:ActionType>&#xa;                                                        &lt;xsl:value-of select=&quot;actionType&quot;/>&#xa;                                                    &lt;/pfx4:ActionType>&#xa;                                                &lt;/xsl:if>&#xa;                                                &lt;xsl:if test=&quot;accountHolderInfo&quot;>&#xa;                                                    &lt;pfx4:HolderName>&#xa;                                                        &lt;xsl:value-of select=&quot;accountHolderInfo&quot;/>&#xa;                                                    &lt;/pfx4:HolderName>&#xa;                                                &lt;/xsl:if>&#xa;                                                &lt;xsl:if test=&quot;accountNo&quot;>&#xa;                                                    &lt;pfx4:ID>&#xa;                                                        &lt;xsl:value-of select=&quot;accountNo&quot;/>&#xa;                                                    &lt;/pfx4:ID>&#xa;                                                &lt;/xsl:if>&#xa;                                                &lt;xsl:if test=&quot;accountType&quot;>&#xa;                                                    &lt;pfx4:Type>&#xa;                                                        &lt;xsl:value-of select=&quot;accountType&quot;/>&#xa;                                                    &lt;/pfx4:Type>&#xa;                                                &lt;/xsl:if>&#xa;                                                &lt;xsl:if test=&quot;active&quot;>&#xa;                                                    &lt;pfx4:Active>&#xa;                                                        &lt;xsl:value-of select=&quot;active&quot;/>&#xa;                                                    &lt;/pfx4:Active>&#xa;                                                &lt;/xsl:if>&#xa;                                                &lt;xsl:if test=&quot;closeDate&quot;>&#xa;                                                    &lt;pfx4:CloseDate>&#xa;                                                        &lt;xsl:value-of select=&quot;tib:create-date(year-from-date(closeDate), month-from-date(closeDate), day-from-date(closeDate))&quot;/>&#xa;                                                    &lt;/pfx4:CloseDate>&#xa;                                                &lt;/xsl:if>&#xa;                                                &lt;xsl:if test=&quot;company&quot;>&#xa;                                                    &lt;pfx4:CompanyCode>&#xa;                                                        &lt;xsl:value-of select=&quot;company&quot;/>&#xa;                                                    &lt;/pfx4:CompanyCode>&#xa;                                                &lt;/xsl:if>&#xa;                                                &lt;xsl:if test=&quot;companyName&quot;>&#xa;                                                    &lt;pfx4:CompanyName>&#xa;                                                        &lt;xsl:value-of select=&quot;companyName&quot;/>&#xa;                                                    &lt;/pfx4:CompanyName>&#xa;                                                &lt;/xsl:if>&#xa;                                                &lt;xsl:if test=&quot;startDate&quot;>&#xa;                                                    &lt;pfx4:StartDate>&#xa;                                                        &lt;xsl:value-of select=&quot;tib:create-date(year-from-date(startDate), month-from-date(startDate), day-from-date(startDate))&quot;/>&#xa;                                                    &lt;/pfx4:StartDate>&#xa;                                                &lt;/xsl:if>&#xa;                                            &lt;/pfx4:Account>&#xa;                                        &lt;/xsl:for-each>&#xa;                                    &lt;/pfx4:Accounts>&#xa;                                &lt;/pfx4:CopaProfileExt>&#xa;                            &lt;/pfx2:TPA_Extensions>&#xa;                        &lt;/pfx2:Customer>&#xa;                    &lt;/pfx2:Profile>&#xa;                &lt;/pfx2:ProfileInfo>&#xa;            &lt;/pfx2:Profiles>&#xa;        &lt;/pfx2:OTA_ProfileReadRS>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                    </tibex:inputBindings>
                    <tibex:config>
                        <bwext:BWActivity
                            activityTypeID="bw.generalactivities.mapper"
                            version="6.0.0.001"
                            xmlns:OTA_2003_05="http://www.opentravel.org/OTA/2003/05"
                            xmlns:activityconfig="http://tns.tibco.com/bw/model/activityconfig"
                            xmlns:bwext="http://tns.tibco.com/bw/model/core/bwext"
                            xmlns:generalactivities="http://ns.tibco.com/bw/palette/generalactivities" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <activityConfig>
                                <properties name="config" xsi:type="activityconfig:EMFProperty">
                                    <type href="http://ns.tibco.com/bw/palette/generalactivities#//Mapper"/>
                                    <value
                                    inputQName="OTA_2003_05:OTA_ProfileReadRS" xsi:type="generalactivities:Mapper"/>
                                </properties>
                            </activityConfig>
                        </bwext:BWActivity>
                    </tibex:config>
                </tibex:activityExtension>
            </bpws:extensionActivity>
            <bpws:empty name="save-Cache" tibex:xpdlId="396f5076-e762-4970-9eb9-50116388bc10">
                <bpws:targets>
                    <bpws:target linkName="Map-Data-Full-Cache-to-save-Cache"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="save-Cache-to-PutCache">
                        <tibex:DesignExpression>
                            <tibex:expression
                                expression="(not($getCache/HasError = true()))" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"/>
                        </tibex:DesignExpression>
                        <bpws:transitionCondition expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"><![CDATA[(not($getCache/HasError = true()))]]></bpws:transitionCondition>
                    </bpws:source>
                    <bpws:source linkName="save-Cache-to-Null">
                        <bpws:transitionCondition><![CDATA[##otherwise##]]></bpws:transitionCondition>
                    </bpws:source>
                </bpws:sources>
            </bpws:empty>
            <bpws:extensionActivity>
                <tibex:extActivity inputVariable="PutCache-input"
                    name="PutCache" outputVariable="PutCache"
                    tibex:xpdlId="94be1ad7-2e96-48ff-bc24-5b1f11f84147"
                    type="bw.generalactivities.callprocess" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="save-Cache-to-PutCache"/>
                    </bpws:targets>
                    <bpws:sources>
                        <bpws:source linkName="PutCache-to-Null"/>
                    </bpws:sources>
                    <tibex:inputBindings>
                        <tibex:inputBinding
                            expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://webservices.lms.ama.com/&quot; xmlns:pfx2=&quot;http://www.opentravel.org/OTA/2003/05&quot; xmlns:ns=&quot;http://www.tibco.com/pe/WriteToLogActivitySchema&quot; xmlns:pfx3=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:pfx4=&quot;http://www.copaair.com/schemas/trn/crm/passengerprofile&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:JSON=&quot;java://com.hp.tibco.bw.functions.json.JSON&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://www.tibco.com/namespaces/tnt/plugins/as&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:Utilities=&quot;java://Utilities&quot; xmlns:wsdl=&quot;http://schemas.xmlsoap.org/wsdl/&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://www.hp.com/schemas/services/exception&quot; xmlns:StringUtil=&quot;java://com.hp.tibco.bw.functions.string.StringFunctions&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;Map-Data-Full-Cache&quot;/>&#xa;    &lt;xsl:param name=&quot;PassengerProfile-Constants-FFPDB-ModifiedBy&quot;/>&#xa;    &lt;xsl:param name=&quot;Start&quot;/>&#xa;    &lt;xsl:param name=&quot;PassengerProfile-Constants-Service-Profile-PreAssigned&quot;/>&#xa;    &lt;xsl:param name=&quot;PassengerProfile-Constants-Service-Profile-Found&quot;/>&#xa;    &lt;xsl:param name=&quot;PassengerProfile-Constants-Service-Profile-ProcessStatus-Success&quot;/>&#xa;    &lt;xsl:param name=&quot;getProfileFromAmadeus&quot;/>&#xa;    &lt;xsl:template name=&quot;PutCache-Input&quot; match=&quot;/&quot;>&#xa;        &lt;ns1:ActivityInput>&#xa;            &lt;Tuple>&#xa;                &lt;FrequentFlyerNumber>&#xa;                    &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/id&quot;/>&#xa;                &lt;/FrequentFlyerNumber>&#xa;                &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/userName&quot;>&#xa;                    &lt;UserName>&#xa;                        &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/userName&quot;/>&#xa;                    &lt;/UserName>&#xa;                &lt;/xsl:if>&#xa;                &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/emails[emailPreferred = &amp;quot;T&amp;quot;]/emailAddress&quot;>&#xa;                    &lt;EmailAddress>&#xa;                        &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/emails[emailPreferred = &amp;quot;T&amp;quot;]/emailAddress&quot;/>&#xa;                    &lt;/EmailAddress>&#xa;                &lt;/xsl:if>&#xa;                &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/title&quot;>&#xa;                    &lt;Title>&#xa;                        &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/title&quot;/>&#xa;                    &lt;/Title>&#xa;                &lt;/xsl:if>&#xa;                &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/name&quot;>&#xa;                    &lt;FirstName>&#xa;                        &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/name&quot;/>&#xa;                    &lt;/FirstName>&#xa;                &lt;/xsl:if>&#xa;                &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/middleName&quot;>&#xa;                    &lt;MiddleName>&#xa;                        &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/middleName&quot;/>&#xa;                    &lt;/MiddleName>&#xa;                &lt;/xsl:if>&#xa;                &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/surname&quot;>&#xa;                    &lt;Surname>&#xa;                        &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/surname&quot;/>&#xa;                    &lt;/Surname>&#xa;                &lt;/xsl:if>&#xa;                &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/commLanguage&quot;>&#xa;                    &lt;CommunicationLanguage>&#xa;                        &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/commLanguage&quot;/>&#xa;                    &lt;/CommunicationLanguage>&#xa;                &lt;/xsl:if>&#xa;                &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/memberCard/awardMiles&quot;>&#xa;                    &lt;MilesAwardBalance>&#xa;                        &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/memberCard/awardMiles&quot;/>&#xa;                    &lt;/MilesAwardBalance>&#xa;                &lt;/xsl:if>&#xa;                &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/memberCard/tier&quot;>&#xa;                    &lt;TierLevelStatus>&#xa;                        &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/memberCard/tier&quot;/>&#xa;                    &lt;/TierLevelStatus>&#xa;                &lt;/xsl:if>&#xa;                &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/address[1]/zipCode&quot;>&#xa;                    &lt;ZIPCode>&#xa;                        &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/address[1]/zipCode&quot;/>&#xa;                    &lt;/ZIPCode>&#xa;                &lt;/xsl:if>&#xa;                &lt;xsl:choose>&#xa;                    &lt;xsl:when test=&quot;string-length($getProfileFromAmadeus/retrieveMemberResponse/phones[phonePreferred = &amp;quot;T&amp;quot;]/phoneType[1]) = 0&quot;/>&#xa;                    &lt;xsl:when test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/phones[phonePreferred = &amp;quot;T&amp;quot;]/phoneType[1] = &amp;quot;HPH&amp;quot; or $getProfileFromAmadeus/retrieveMemberResponse/phones[phonePreferred = &amp;quot;T&amp;quot;]/phoneType[1] = &amp;quot;HFX&amp;quot;&quot;>&#xa;                        &lt;PreferredPhoneLocationType>&#xa;                            &lt;xsl:value-of select=&quot;&amp;quot;6&amp;quot;&quot;/>&#xa;                        &lt;/PreferredPhoneLocationType>&#xa;                    &lt;/xsl:when>&#xa;                    &lt;xsl:when test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/phones[phonePreferred = &amp;quot;T&amp;quot;]/phoneType[1] = &amp;quot;BPH&amp;quot; or $getProfileFromAmadeus/retrieveMemberResponse/phones[phonePreferred = &amp;quot;T&amp;quot;]/phoneType[1] = &amp;quot;BFX&amp;quot;&quot;>&#xa;                        &lt;PreferredPhoneLocationType>&#xa;                            &lt;xsl:value-of select=&quot;&amp;quot;7&amp;quot;&quot;/>&#xa;                        &lt;/PreferredPhoneLocationType>&#xa;                    &lt;/xsl:when>&#xa;                    &lt;xsl:otherwise>&#xa;                        &lt;PreferredPhoneLocationType>&#xa;                            &lt;xsl:value-of select=&quot;8&quot;/>&#xa;                        &lt;/PreferredPhoneLocationType>&#xa;                    &lt;/xsl:otherwise>&#xa;                &lt;/xsl:choose>&#xa;                &lt;xsl:choose>&#xa;                    &lt;xsl:when test=&quot;string-length($getProfileFromAmadeus/retrieveMemberResponse/phones[phonePreferred = &amp;quot;T&amp;quot;]/phoneType[1]) = 0&quot;/>&#xa;                    &lt;xsl:when test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/phones[phonePreferred = &amp;quot;T&amp;quot;]/phoneType[1] = &amp;quot;BPH&amp;quot; or $getProfileFromAmadeus/retrieveMemberResponse/phones[phonePreferred = &amp;quot;T&amp;quot;]/phoneType[1] = &amp;quot;HPH&amp;quot;&quot;>&#xa;                        &lt;PreferredPhoneTechType>&#xa;                            &lt;xsl:value-of select=&quot;&amp;quot;1&amp;quot;&quot;/>&#xa;                        &lt;/PreferredPhoneTechType>&#xa;                    &lt;/xsl:when>&#xa;                    &lt;xsl:when test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/phones[phonePreferred = &amp;quot;T&amp;quot;]/phoneType[1] = &amp;quot;BFX&amp;quot; or $getProfileFromAmadeus/retrieveMemberResponse/phones[phonePreferred = &amp;quot;T&amp;quot;]/phoneType[1] = &amp;quot;HFX&amp;quot;&quot;>&#xa;                        &lt;PreferredPhoneTechType>&#xa;                            &lt;xsl:value-of select=&quot;&amp;quot;3&amp;quot;&quot;/>&#xa;                        &lt;/PreferredPhoneTechType>&#xa;                    &lt;/xsl:when>&#xa;                    &lt;xsl:otherwise>&#xa;                        &lt;PreferredPhoneTechType>&#xa;                            &lt;xsl:value-of select=&quot;&amp;quot;5&amp;quot;&quot;/>&#xa;                        &lt;/PreferredPhoneTechType>&#xa;                    &lt;/xsl:otherwise>&#xa;                &lt;/xsl:choose>&#xa;                &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/phones[phonePreferred = &amp;quot;T&amp;quot;]/phoneAreaCode[1]&quot;>&#xa;                    &lt;PreferredPhoneAreaCityCode>&#xa;                        &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/phones[phonePreferred = &amp;quot;T&amp;quot;]/phoneAreaCode[1]&quot;/>&#xa;                    &lt;/PreferredPhoneAreaCityCode>&#xa;                &lt;/xsl:if>&#xa;                &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/phones[phonePreferred = &amp;quot;T&amp;quot;]/phoneIntCode[1]&quot;>&#xa;                    &lt;PreferredPhoneCountryAccessCode>&#xa;                        &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/phones[phonePreferred = &amp;quot;T&amp;quot;]/phoneIntCode[1]&quot;/>&#xa;                    &lt;/PreferredPhoneCountryAccessCode>&#xa;                &lt;/xsl:if>&#xa;                &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/phones[phonePreferred = &amp;quot;T&amp;quot;]/phoneNumber[1]&quot;>&#xa;                    &lt;PreferredPhonePhoneNumber>&#xa;                        &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/phones[phonePreferred = &amp;quot;T&amp;quot;]/phoneNumber[1]&quot;/>&#xa;                    &lt;/PreferredPhonePhoneNumber>&#xa;                &lt;/xsl:if>&#xa;                &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/phones[phonePreferred = &amp;quot;T&amp;quot;]/phoneExt[1]&quot;>&#xa;                    &lt;PreferredPhoneExtension>&#xa;                        &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/phones[phonePreferred = &amp;quot;T&amp;quot;]/phoneExt[1]&quot;/>&#xa;                    &lt;/PreferredPhoneExtension>&#xa;                &lt;/xsl:if>&#xa;                &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/phones[phonePreferred = &amp;quot;T&amp;quot;]/phoneType[1]&quot;>&#xa;                    &lt;PreferredPhoneRemark>&#xa;                        &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/phones[phonePreferred = &amp;quot;T&amp;quot;]/phoneType[1]&quot;/>&#xa;                    &lt;/PreferredPhoneRemark>&#xa;                &lt;/xsl:if>&#xa;                &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/phones[phoneType = &amp;quot;BUS&amp;quot;]/phoneExt&quot;>&#xa;                    &lt;PIN>&#xa;                        &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/phones[phoneType = &amp;quot;BUS&amp;quot;]/phoneExt&quot;/>&#xa;                    &lt;/PIN>&#xa;                &lt;/xsl:if>&#xa;                &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/status&quot;>&#xa;                    &lt;Status>&#xa;                        &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/status&quot;/>&#xa;                    &lt;/Status>&#xa;                &lt;/xsl:if>&#xa;                &lt;DateOfBirth>&#xa;                    &lt;xsl:value-of select=&quot;tib:create-dateTime(substring($getProfileFromAmadeus/retrieveMemberResponse/birthDate, 1, 4), substring($getProfileFromAmadeus/retrieveMemberResponse/birthDate, 6, 2), substring($getProfileFromAmadeus/retrieveMemberResponse/birthDate, 9, 2), 0, 0, 0)&quot;/>&#xa;                &lt;/DateOfBirth>&#xa;                &lt;xsl:choose>&#xa;                    &lt;xsl:when test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/processCode = $PassengerProfile-Constants-Service-Profile-ProcessStatus-Success&quot;>&#xa;                        &lt;ProcessStatus>&#xa;                            &lt;xsl:value-of select=&quot;$PassengerProfile-Constants-Service-Profile-Found&quot;/>&#xa;                        &lt;/ProcessStatus>&#xa;                    &lt;/xsl:when>&#xa;                    &lt;xsl:otherwise>&#xa;                        &lt;ProcessStatus>&#xa;                            &lt;xsl:value-of select=&quot;$PassengerProfile-Constants-Service-Profile-PreAssigned&quot;/>&#xa;                        &lt;/ProcessStatus>&#xa;                    &lt;/xsl:otherwise>&#xa;                &lt;/xsl:choose>&#xa;                &lt;xsl:choose>&#xa;                    &lt;xsl:when test=&quot;$Start/useCache = false()&quot;>&#xa;                        &lt;ModifiedBy>&#xa;                            &lt;xsl:value-of select=&quot;$PassengerProfile-Constants-FFPDB-ModifiedBy&quot;/>&#xa;                        &lt;/ModifiedBy>&#xa;                    &lt;/xsl:when>&#xa;                    &lt;xsl:otherwise>&#xa;                        &lt;ModifiedBy>&#xa;                            &lt;xsl:value-of select=&quot;&amp;quot;Get&amp;quot;&quot;/>&#xa;                        &lt;/ModifiedBy>&#xa;                    &lt;/xsl:otherwise>&#xa;                &lt;/xsl:choose>&#xa;                &lt;FullProfile>&#xa;                    &lt;xsl:value-of select=&quot;StringUtil:compress(JSON:toJSON(tib:render-xml($Map-Data-Full-Cache)))&quot;/>&#xa;                &lt;/FullProfile>&#xa;                &lt;Passport>&#xa;                    &lt;xsl:value-of select=&quot;StringUtil:getLetterAndDigit($getProfileFromAmadeus/retrieveMemberResponse/memberDocs[documentType = &amp;quot;PASSPORT&amp;quot;]/documentId)&quot;/>&#xa;                &lt;/Passport>&#xa;                &lt;DrivingLicense>&#xa;                    &lt;xsl:value-of select=&quot;StringUtil:getLetterAndDigit($getProfileFromAmadeus/retrieveMemberResponse/memberDocs[documentType = &amp;quot;DRIVING_LICENSE&amp;quot;]/documentId)&quot;/>&#xa;                &lt;/DrivingLicense>&#xa;                &lt;NationalID>&#xa;                    &lt;xsl:value-of select=&quot;StringUtil:getLetterAndDigit($getProfileFromAmadeus/retrieveMemberResponse/memberDocs[documentType = &amp;quot;NATIONAL_ID&amp;quot;]/documentId)&quot;/>&#xa;                &lt;/NationalID>&#xa;                &lt;SecundaryPassport>&#xa;                    &lt;xsl:value-of select=&quot;StringUtil:getLetterAndDigit($getProfileFromAmadeus/retrieveMemberResponse/memberDocs[documentType != &amp;quot;PASSPORT&amp;quot; and documentType != &amp;quot;DRIVING_LICENSE&amp;quot; and documentType != &amp;quot;NATIONAL_ID&amp;quot; and documentType != &amp;quot;SOCIAL_SECURITY&amp;quot;]/documentId)&quot;/>&#xa;                &lt;/SecundaryPassport>&#xa;            &lt;/Tuple>&#xa;        &lt;/ns1:ActivityInput>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                    </tibex:inputBindings>
                    <tibex:CallProcess subProcessName="Util.PutCacheDB" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"/>
                </tibex:extActivity>
            </bpws:extensionActivity>
            <bpws:empty name="Null" tibex:xpdlId="3dc04484-c0b9-4184-9a3d-3c5c9ce4b9cb">
                <bpws:targets>
                    <bpws:target linkName="getCache-to-Null"/>
                    <bpws:target linkName="PutCache-to-Null"/>
                    <bpws:target linkName="save-Cache-to-Null"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="Null-to-Light-Profile">
                        <bpws:transitionCondition><![CDATA[##otherwise##]]></bpws:transitionCondition>
                    </bpws:source>
                    <bpws:source linkName="Null-to-Full-Profile">
                        <tibex:DesignExpression>
                            <tibex:expression
                                expression="$Start/light = false() and not($getCache/Result/Tuple/ProcessStatus = $PassengerProfile-Constants-Service-Profile-PreAssigned)" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"/>
                        </tibex:DesignExpression>
                        <bpws:transitionCondition expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"><![CDATA[$Start/light = false() and not($getCache/Result/Tuple/ProcessStatus = $PassengerProfile-Constants-Service-Profile-PreAssigned)]]></bpws:transitionCondition>
                    </bpws:source>
                    <bpws:source linkName="Null-to-Map-Data-PreAssigned">
                        <tibex:DesignExpression>
                            <tibex:expression
                                expression="$getCache/Result/Tuple/ProcessStatus = $PassengerProfile-Constants-Service-Profile-PreAssigned" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"/>
                        </tibex:DesignExpression>
                        <bpws:transitionCondition expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"><![CDATA[$getCache/Result/Tuple/ProcessStatus = $PassengerProfile-Constants-Service-Profile-PreAssigned]]></bpws:transitionCondition>
                    </bpws:source>
                </bpws:sources>
            </bpws:empty>
            <bpws:empty name="Is-preassigned" tibex:xpdlId="9a625d24-40ba-4faa-8506-6fb12879e972">
                <bpws:targets>
                    <bpws:target linkName="getProfileFromAmadeus-to-Is-preassigned"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="Is-preassigned-to-PutCache-Preassigned"/>
                </bpws:sources>
            </bpws:empty>
            <bpws:empty name="Light-Profile" tibex:xpdlId="811caeba-c04c-4483-b62d-a5ae586ef74e">
                <bpws:targets>
                    <bpws:target linkName="Null-to-Light-Profile"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="Light-Profile-to-Map-Data-Light"/>
                    <bpws:source linkName="Light-Profile-to-GetTierCodeLight">
                        <tibex:DesignExpression>
                            <tibex:expression
                                expression="count($getCache/Result/Tuple) > 0 and string-length($getCache/Result[1]/Tuple/TierLevelStatus) > 0" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"/>
                        </tibex:DesignExpression>
                        <bpws:transitionCondition expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"><![CDATA[count($getCache/Result/Tuple) > 0 and string-length($getCache/Result[1]/Tuple/TierLevelStatus) > 0]]></bpws:transitionCondition>
                    </bpws:source>
                </bpws:sources>
            </bpws:empty>
            <bpws:empty name="Full-Profile" tibex:xpdlId="c51c79a4-55ee-4525-8d7f-340e963b11b4">
                <bpws:targets>
                    <bpws:target linkName="Null-to-Full-Profile"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="Full-Profile-to-Map-Data-Full">
                        <bpws:transitionCondition><![CDATA[##otherwise##]]></bpws:transitionCondition>
                    </bpws:source>
                    <bpws:source linkName="Full-Profile-to-Parse-XML-FullProfile">
                        <tibex:DesignExpression>
                            <tibex:expression
                                expression="not(exists($Map-Data-Full-Cache))" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"/>
                        </tibex:DesignExpression>
                        <bpws:transitionCondition expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0"><![CDATA[not(exists($Map-Data-Full-Cache))]]></bpws:transitionCondition>
                    </bpws:source>
                </bpws:sources>
            </bpws:empty>
            <bpws:extensionActivity>
                <tibex:extActivity name="Exception"
                    tibex:xpdlId="977416c5-747c-4c08-b299-61b79c5cac61"
                    type="bw.generalactivities.callprocess" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="getProfileFromAmadeus-to-Exception"/>
                    </bpws:targets>
                    <bpws:sources>
                        <bpws:source linkName="Exception-to-Null-1"/>
                    </bpws:sources>
                    <tibex:CallProcess xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"/>
                </tibex:extActivity>
            </bpws:extensionActivity>
            <bpws:extensionActivity>
                <tibex:extActivity
                    inputVariable="PutCache-Preassigned-input"
                    name="PutCache-Preassigned"
                    outputVariable="PutCache-Preassigned"
                    tibex:xpdlId="f7c621ee-0b81-4973-9e6b-edfae014ac93"
                    type="bw.generalactivities.callprocess" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="Is-preassigned-to-PutCache-Preassigned"/>
                    </bpws:targets>
                    <bpws:sources>
                        <bpws:source linkName="PutCache-Preassigned-to-Map-Data-PreAssigned"/>
                    </bpws:sources>
                    <tibex:inputBindings>
                        <tibex:inputBinding
                            expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://webservices.lms.ama.com/&quot; xmlns:pfx2=&quot;http://www.opentravel.org/OTA/2003/05&quot; xmlns:ns=&quot;http://www.tibco.com/pe/WriteToLogActivitySchema&quot; xmlns:pfx3=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:pfx4=&quot;http://www.copaair.com/schemas/trn/crm/passengerprofile&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:JSON=&quot;java://com.hp.tibco.bw.functions.json.JSON&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://www.tibco.com/namespaces/tnt/plugins/as&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:Utilities=&quot;java://Utilities&quot; xmlns:wsdl=&quot;http://schemas.xmlsoap.org/wsdl/&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://www.hp.com/schemas/services/exception&quot; xmlns:StringUtil=&quot;java://com.hp.tibco.bw.functions.string.StringFunctions&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;PassengerProfile-Constants-Service-Profile-PreAssigned&quot;/>&#xa;    &lt;xsl:param name=&quot;Start&quot;/>&#xa;    &lt;xsl:template name=&quot;PutCache-Preassigned-Input&quot; match=&quot;/&quot;>&#xa;        &lt;ns1:ActivityInput>&#xa;            &lt;Tuple>&#xa;                &lt;FrequentFlyerNumber>&#xa;                    &lt;xsl:value-of select=&quot;$Start/pfx2:OTA_ReadRQ/pfx2:ReadRequests/pfx2:ReadRequest[1]/pfx2:UniqueID/@ID&quot;/>&#xa;                &lt;/FrequentFlyerNumber>&#xa;                &lt;ProcessStatus>&#xa;                    &lt;xsl:value-of select=&quot;$PassengerProfile-Constants-Service-Profile-PreAssigned&quot;/>&#xa;                &lt;/ProcessStatus>&#xa;            &lt;/Tuple>&#xa;        &lt;/ns1:ActivityInput>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                    </tibex:inputBindings>
                    <tibex:CallProcess subProcessName="Util.PutCacheDB" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"/>
                </tibex:extActivity>
            </bpws:extensionActivity>
            <bpws:extensionActivity>
                <tibex:activityExtension
                    inputVariable="Map-Data-PreAssigned-input"
                    name="Map-Data-PreAssigned"
                    outputVariable="Map-Data-PreAssigned"
                    tibex:xpdlId="b2e5dc31-3dd0-453c-bfcd-0fb340aa4978" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="PutCache-Preassigned-to-Map-Data-PreAssigned"/>
                        <bpws:target linkName="Null-to-Map-Data-PreAssigned"/>
                    </bpws:targets>
                    <bpws:sources>
                        <bpws:source linkName="Map-Data-PreAssigned-to-End"/>
                    </bpws:sources>
                    <tibex:inputBindings>
                        <tibex:inputBinding
                            expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://webservices.lms.ama.com/&quot; xmlns:pfx2=&quot;http://www.opentravel.org/OTA/2003/05&quot; xmlns:ns=&quot;http://www.tibco.com/pe/WriteToLogActivitySchema&quot; xmlns:pfx3=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:pfx4=&quot;http://www.copaair.com/schemas/trn/crm/passengerprofile&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:JSON=&quot;java://com.hp.tibco.bw.functions.json.JSON&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://www.tibco.com/namespaces/tnt/plugins/as&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:Utilities=&quot;java://Utilities&quot; xmlns:wsdl=&quot;http://schemas.xmlsoap.org/wsdl/&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://www.hp.com/schemas/services/exception&quot; xmlns:StringUtil=&quot;java://com.hp.tibco.bw.functions.string.StringFunctions&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;PassengerProfile-Constants-Service-Profile-PreAssigned&quot;/>&#xa;    &lt;xsl:param name=&quot;Start&quot;/>&#xa;    &lt;xsl:template name=&quot;Map-Data-PreAssigned-Input&quot; match=&quot;/&quot;>&#xa;        &lt;pfx2:OTA_ProfileReadRS>&#xa;            &lt;xsl:attribute name=&quot;Version&quot;>&#xa;                &lt;xsl:value-of select=&quot;$Start/pfx2:OTA_ReadRQ/@Version&quot;/>&#xa;            &lt;/xsl:attribute>&#xa;            &lt;pfx2:Success/>&#xa;            &lt;pfx2:Profiles>&#xa;                &lt;pfx2:ProfileInfo>&#xa;                    &lt;pfx2:Profile>&#xa;                        &lt;pfx2:Customer>&#xa;                            &lt;pfx2:CustLoyalty>&#xa;                                &lt;xsl:attribute name=&quot;ProgramID&quot;>&#xa;                                    &lt;xsl:value-of select=&quot;&amp;quot;CM&amp;quot;&quot;/>&#xa;                                &lt;/xsl:attribute>&#xa;                                &lt;xsl:if test=&quot;$Start/pfx2:OTA_ReadRQ/pfx2:ReadRequests/pfx2:ReadRequest[1]/pfx2:UniqueID/@ID&quot;>&#xa;                                    &lt;xsl:attribute name=&quot;MembershipID&quot;>&#xa;                                        &lt;xsl:value-of select=&quot;$Start/pfx2:OTA_ReadRQ/pfx2:ReadRequests/pfx2:ReadRequest[1]/pfx2:UniqueID/@ID&quot;/>&#xa;                                    &lt;/xsl:attribute>&#xa;                                &lt;/xsl:if>&#xa;                            &lt;/pfx2:CustLoyalty>&#xa;                            &lt;pfx2:TPA_Extensions>&#xa;                                &lt;pfx4:CopaProfileExt>&#xa;                                    &lt;pfx4:ProfileProcessStatus>&#xa;                                        &lt;xsl:value-of select=&quot;$PassengerProfile-Constants-Service-Profile-PreAssigned&quot;/>&#xa;                                    &lt;/pfx4:ProfileProcessStatus>&#xa;                                    &lt;xsl:if test=&quot;$Start/pfx2:OTA_ReadRQ/pfx2:ReadRequests/pfx2:ReadRequest[1]/pfx2:UniqueID/@ID&quot;>&#xa;                                        &lt;pfx4:FrequentFlyerNumber>&#xa;                                            &lt;xsl:value-of select=&quot;$Start/pfx2:OTA_ReadRQ/pfx2:ReadRequests/pfx2:ReadRequest[1]/pfx2:UniqueID/@ID&quot;/>&#xa;                                        &lt;/pfx4:FrequentFlyerNumber>&#xa;                                    &lt;/xsl:if>&#xa;                                &lt;/pfx4:CopaProfileExt>&#xa;                            &lt;/pfx2:TPA_Extensions>&#xa;                        &lt;/pfx2:Customer>&#xa;                    &lt;/pfx2:Profile>&#xa;                &lt;/pfx2:ProfileInfo>&#xa;            &lt;/pfx2:Profiles>&#xa;        &lt;/pfx2:OTA_ProfileReadRS>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                    </tibex:inputBindings>
                    <tibex:config>
                        <bwext:BWActivity
                            activityTypeID="bw.generalactivities.mapper"
                            version="6.0.0.001"
                            xmlns:OTA_2003_05="http://www.opentravel.org/OTA/2003/05"
                            xmlns:activityconfig="http://tns.tibco.com/bw/model/activityconfig"
                            xmlns:bwext="http://tns.tibco.com/bw/model/core/bwext"
                            xmlns:generalactivities="http://ns.tibco.com/bw/palette/generalactivities" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <activityConfig>
                                <properties name="config" xsi:type="activityconfig:EMFProperty">
                                    <type href="http://ns.tibco.com/bw/palette/generalactivities#//Mapper"/>
                                    <value
                                    inputQName="OTA_2003_05:OTA_ProfileReadRS" xsi:type="generalactivities:Mapper"/>
                                </properties>
                            </activityConfig>
                        </bwext:BWActivity>
                    </tibex:config>
                </tibex:activityExtension>
            </bpws:extensionActivity>
            <bpws:extensionActivity>
                <tibex:activityExtension
                    inputVariable="Parse-XML-FullProfile-input"
                    name="Parse-XML-FullProfile"
                    outputVariable="Parse-XML-FullProfile"
                    tibex:xpdlId="edf6323f-a9da-4557-9384-9a5ade71ccfe" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="Full-Profile-to-Parse-XML-FullProfile"/>
                    </bpws:targets>
                    <bpws:sources>
                        <bpws:source linkName="Parse-XML-FullProfile-to-Map-Data-Full"/>
                    </bpws:sources>
                    <tibex:inputBindings>
                        <tibex:inputBinding
                            expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://webservices.lms.ama.com/&quot; xmlns:pfx2=&quot;http://www.opentravel.org/OTA/2003/05&quot; xmlns:ns=&quot;http://www.tibco.com/pe/WriteToLogActivitySchema&quot; xmlns:pfx3=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:pfx4=&quot;http://www.copaair.com/schemas/trn/crm/passengerprofile&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:JSON=&quot;java://com.hp.tibco.bw.functions.json.JSON&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://www.tibco.com/namespaces/tnt/plugins/as&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:Utilities=&quot;java://Utilities&quot; xmlns:ansbw6=&quot;http://www.tibco.com/namespaces/tnt/plugins/parsexml&quot; xmlns:wsdl=&quot;http://schemas.xmlsoap.org/wsdl/&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://www.hp.com/schemas/services/exception&quot; xmlns:StringUtil=&quot;java://com.hp.tibco.bw.functions.string.StringFunctions&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;getCache&quot;/>&#xa;    &lt;xsl:template name=&quot;Parse-XML-FullProfile-Input&quot; match=&quot;/&quot;>&#xa;        &lt;ansbw6:xmlString>&#xa;            &lt;xsl:value-of select=&quot;JSON:toXML(StringUtil:decompress($getCache/Result[1]/Tuple/FullProfile))&quot;/>&#xa;        &lt;/ansbw6:xmlString>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                    </tibex:inputBindings>
                    <tibex:config>
                        <bwext:BWActivity
                            activityTypeID="bw.xml.parsexml"
                            version="6.0.0.20121128"
                            xmlns:OTA_2003_05="http://www.opentravel.org/OTA/2003/05"
                            xmlns:activityconfig="http://tns.tibco.com/bw/model/activityconfig"
                            xmlns:bwext="http://tns.tibco.com/bw/model/core/bwext"
                            xmlns:palettexml="http://ns.tibco.com/bw/palette/xmlpalette" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <activityConfig>
                                <properties name="config" xsi:type="activityconfig:EMFProperty">
                                    <type href="http://ns.tibco.com/bw/palette/xmlpalette#//ParseXml"/>
                                    <value inputStyle="text"
                                    outputElementQName="OTA_2003_05:OTA_ProfileReadRS"
                                    validateOutput="true" xsi:type="palettexml:ParseXml"/>
                                </properties>
                            </activityConfig>
                        </bwext:BWActivity>
                    </tibex:config>
                </tibex:activityExtension>
            </bpws:extensionActivity>
            <bpws:extensionActivity>
                <tibex:activityExtension
                    inputVariable="Map-Data-Full-input"
                    name="Map-Data-Full" outputVariable="Map-Data-Full"
                    tibex:xpdlId="bf310fa2-a901-4e35-946e-788bc307983e" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="Full-Profile-to-Map-Data-Full"/>
                        <bpws:target linkName="Parse-XML-FullProfile-to-Map-Data-Full"/>
                    </bpws:targets>
                    <bpws:sources>
                        <bpws:source linkName="Map-Data-Full-to-End"/>
                    </bpws:sources>
                    <tibex:inputBindings>
                        <tibex:inputBinding
                            expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://webservices.lms.ama.com/&quot; xmlns:pfx2=&quot;http://www.opentravel.org/OTA/2003/05&quot; xmlns:ns=&quot;http://www.tibco.com/pe/WriteToLogActivitySchema&quot; xmlns:pfx3=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:pfx4=&quot;http://www.copaair.com/schemas/trn/crm/passengerprofile&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:JSON=&quot;java://com.hp.tibco.bw.functions.json.JSON&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://www.tibco.com/namespaces/tnt/plugins/as&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:Utilities=&quot;java://Utilities&quot; xmlns:wsdl=&quot;http://schemas.xmlsoap.org/wsdl/&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://www.hp.com/schemas/services/exception&quot; xmlns:StringUtil=&quot;java://com.hp.tibco.bw.functions.string.StringFunctions&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;Map-Data-Full-Cache&quot;/>&#xa;    &lt;xsl:param name=&quot;Parse-XML-FullProfile&quot;/>&#xa;    &lt;xsl:param name=&quot;getCache&quot;/>&#xa;    &lt;xsl:template name=&quot;Map-Data-Full-Input&quot; match=&quot;/&quot;>&#xa;        &lt;xsl:choose>&#xa;            &lt;xsl:when test=&quot;count($getCache/Result/Tuple) > 0 and $getCache/Result/Tuple[1]/ForceSync = false()&quot;>&#xa;                &lt;xsl:copy-of select=&quot;$Parse-XML-FullProfile&quot;/>&#xa;            &lt;/xsl:when>&#xa;            &lt;xsl:otherwise>&#xa;                &lt;xsl:copy-of select=&quot;$Map-Data-Full-Cache&quot;/>&#xa;            &lt;/xsl:otherwise>&#xa;        &lt;/xsl:choose>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                    </tibex:inputBindings>
                    <tibex:config>
                        <bwext:BWActivity
                            activityTypeID="bw.generalactivities.mapper"
                            version="6.0.0.001"
                            xmlns:OTA_2003_05="http://www.opentravel.org/OTA/2003/05"
                            xmlns:activityconfig="http://tns.tibco.com/bw/model/activityconfig"
                            xmlns:bwext="http://tns.tibco.com/bw/model/core/bwext"
                            xmlns:generalactivities="http://ns.tibco.com/bw/palette/generalactivities" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <activityConfig>
                                <properties name="config" xsi:type="activityconfig:EMFProperty">
                                    <type href="http://ns.tibco.com/bw/palette/generalactivities#//Mapper"/>
                                    <value
                                    inputQName="OTA_2003_05:OTA_ProfileReadRS" xsi:type="generalactivities:Mapper"/>
                                </properties>
                            </activityConfig>
                        </bwext:BWActivity>
                    </tibex:config>
                </tibex:activityExtension>
            </bpws:extensionActivity>
            <bpws:extensionActivity>
                <tibex:extActivity
                    inputVariable="GetTierCodeLight-input"
                    name="GetTierCodeLight"
                    outputVariable="GetTierCodeLight"
                    tibex:xpdlId="c688e7c6-2052-4027-982b-c075bdf25673"
                    type="bw.generalactivities.callprocess" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="Light-Profile-to-GetTierCodeLight"/>
                    </bpws:targets>
                    <bpws:sources>
                        <bpws:source linkName="GetTierCodeLight-to-Map-Data-Light"/>
                    </bpws:sources>
                    <tibex:inputBindings>
                        <tibex:inputBinding
                            expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx=&quot;http://webservices.lms.ama.com/&quot; xmlns:pfx2=&quot;http://www.opentravel.org/OTA/2003/05&quot; xmlns:ns=&quot;http://www.tibco.com/pe/WriteToLogActivitySchema&quot; xmlns:pfx3=&quot;http://www.tibco.com/pe/DeployedVarsType&quot; xmlns:pfx4=&quot;http://www.copaair.com/schemas/trn/crm/passengerprofile&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:JSON=&quot;java://com.hp.tibco.bw.functions.json.JSON&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; xmlns:ns1=&quot;http://www.tibco.com/namespaces/tnt/plugins/as&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:Utilities=&quot;java://Utilities&quot; xmlns:ansbw6=&quot;/crm/Processes/Util/GetTierCode-Start-Input.xsd&quot; xmlns:wsdl=&quot;http://schemas.xmlsoap.org/wsdl/&quot; xmlns:pd=&quot;http://xmlns.tibco.com/bw/process/2003&quot; xmlns:ns12=&quot;http://www.hp.com/schemas/services/exception&quot; xmlns:StringUtil=&quot;java://com.hp.tibco.bw.functions.string.StringFunctions&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;getCache&quot;/>&#xa;    &lt;xsl:template name=&quot;GetTierCodeLight-Input&quot; match=&quot;/&quot;>&#xa;        &lt;ansbw6:root>&#xa;            &lt;softCode>&#xa;                &lt;xsl:value-of select=&quot;$getCache/Result[1]/Tuple/TierLevelStatus&quot;/>&#xa;            &lt;/softCode>&#xa;        &lt;/ansbw6:root>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                    </tibex:inputBindings>
                    <tibex:CallProcess subProcessName="Util.GetTierCode" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"/>
                </tibex:extActivity>
            </bpws:extensionActivity>
            <bpws:empty name="Null-1" tibex:xpdlId="4ffef94d-a991-4c29-aef6-9fc81ede36bc">
                <bpws:targets>
                    <bpws:target linkName="Exception-to-Null-1"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="Null-1-to-End"/>
                </bpws:sources>
            </bpws:empty>
            <bpws:extensionActivity>
                <tibex:activityExtension
                    inputVariable="Map-Data-Light-input"
                    name="Map-Data-Light"
                    outputVariable="Map-Data-Light"
                    tibex:xpdlId="b644d1c8-e0ef-464e-aaa2-28e2898dc4f3" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="Light-Profile-to-Map-Data-Light"/>
                        <bpws:target linkName="GetTierCodeLight-to-Map-Data-Light"/>
                    </bpws:targets>
                    <bpws:sources>
                        <bpws:source linkName="Map-Data-Light-to-End"/>
                    </bpws:sources>
                    <tibex:inputBindings>
                        <tibex:inputBinding
                            expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx2=&quot;http://www.opentravel.org/OTA/2003/05&quot; xmlns:pfx4=&quot;http://www.copaair.com/schemas/trn/crm/passengerprofile&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:tib=&quot;http://www.tibco.com/bw/xslt/custom-functions&quot; version=&quot;1.0&quot;>&#xa;    &lt;xsl:param name=&quot;GetTierCodeLight&quot;/>&#xa;    &lt;xsl:param name=&quot;PassengerProfile-Constants-Service-Profile-PreAssigned&quot;/>&#xa;    &lt;xsl:param name=&quot;PassengerProfile-Constants-Service-Profile-Found&quot;/>&#xa;    &lt;xsl:param name=&quot;PassengerProfile-Constants-Service-Profile-ProcessStatus-Success&quot;/>&#xa;    &lt;xsl:param name=&quot;PassengerProfile-Constants-Service-Profile-ProgramID&quot;/>&#xa;    &lt;xsl:param name=&quot;GetTierCode&quot;/>&#xa;    &lt;xsl:param name=&quot;getProfileFromAmadeus&quot;/>&#xa;    &lt;xsl:param name=&quot;Start&quot;/>&#xa;    &lt;xsl:param name=&quot;getCache&quot;/>&#xa;    &lt;xsl:template name=&quot;Map-Data-Light-Input&quot; match=&quot;/&quot;>&#xa;        &lt;xsl:choose>&#xa;            &lt;xsl:when test=&quot;count($getCache/Result/Tuple) = 0&quot;>&#xa;                &lt;pfx2:OTA_ProfileReadRS>&#xa;                    &lt;xsl:attribute name=&quot;Version&quot;>&#xa;                        &lt;xsl:value-of select=&quot;$Start/pfx2:OTA_ReadRQ/@Version&quot;/>&#xa;                    &lt;/xsl:attribute>&#xa;                    &lt;pfx2:Success/>&#xa;                    &lt;pfx2:Profiles>&#xa;                        &lt;pfx2:ProfileInfo>&#xa;                            &lt;pfx2:Profile>&#xa;                                &lt;pfx2:Customer>&#xa;                                    &lt;xsl:attribute name=&quot;BirthDate&quot;>&#xa;                                        &lt;xsl:value-of select=&quot;tib:create-date(substring($getProfileFromAmadeus/retrieveMemberResponse/birthDate, 1, 4), substring($getProfileFromAmadeus/retrieveMemberResponse/birthDate, 6, 2), substring($getProfileFromAmadeus/retrieveMemberResponse/birthDate, 9, 2))&quot;/>&#xa;                                    &lt;/xsl:attribute>&#xa;                                    &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/commLanguage&quot;>&#xa;                                        &lt;xsl:attribute name=&quot;Language&quot;>&#xa;                                            &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/commLanguage&quot;/>&#xa;                                        &lt;/xsl:attribute>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;pfx2:PersonName>&#xa;                                        &lt;xsl:attribute name=&quot;DefaultInd&quot;>&#xa;                                            &lt;xsl:value-of select=&quot;true()&quot;/>&#xa;                                        &lt;/xsl:attribute>&#xa;                                        &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/name&quot;>&#xa;                                            &lt;pfx2:GivenName>&#xa;                                                &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/name&quot;/>&#xa;                                            &lt;/pfx2:GivenName>&#xa;                                        &lt;/xsl:if>&#xa;                                        &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/middleName&quot;>&#xa;                                            &lt;pfx2:MiddleName>&#xa;                                                &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/middleName&quot;/>&#xa;                                            &lt;/pfx2:MiddleName>&#xa;                                        &lt;/xsl:if>&#xa;                                        &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/surname&quot;>&#xa;                                            &lt;pfx2:Surname>&#xa;                                                &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/surname&quot;/>&#xa;                                            &lt;/pfx2:Surname>&#xa;                                        &lt;/xsl:if>&#xa;                                    &lt;/pfx2:PersonName>&#xa;                                    &lt;xsl:for-each select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/phones[phonePreferred = &amp;quot;T&amp;quot;][1]&quot;>&#xa;                                        &lt;pfx2:Telephone>&#xa;                                            &lt;xsl:if test=&quot;seqNo&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;RPH&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;seqNo&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:if>&#xa;                                            &lt;xsl:choose>&#xa;                                                &lt;xsl:when test=&quot;current()/phoneType = &amp;quot;HPH&amp;quot; or current()/phoneType = &amp;quot;HFX&amp;quot;&quot;>&#xa;                                                    &lt;xsl:attribute name=&quot;PhoneLocationType&quot;>&#xa;                                                        &lt;xsl:value-of select=&quot;&amp;quot;6&amp;quot;&quot;/>&#xa;                                                    &lt;/xsl:attribute>&#xa;                                                &lt;/xsl:when>&#xa;                                                &lt;xsl:when test=&quot;current()/phoneType = &amp;quot;BPH&amp;quot; or current()/phoneType = &amp;quot;BFX&amp;quot;&quot;>&#xa;                                                    &lt;xsl:attribute name=&quot;PhoneLocationType&quot;>&#xa;                                                        &lt;xsl:value-of select=&quot;&amp;quot;7&amp;quot;&quot;/>&#xa;                                                    &lt;/xsl:attribute>&#xa;                                                &lt;/xsl:when>&#xa;                                                &lt;xsl:otherwise>&#xa;                                                    &lt;xsl:attribute name=&quot;PhoneLocationType&quot;>&#xa;                                                        &lt;xsl:value-of select=&quot;8&quot;/>&#xa;                                                    &lt;/xsl:attribute>&#xa;                                                &lt;/xsl:otherwise>&#xa;                                            &lt;/xsl:choose>&#xa;                                            &lt;xsl:if test=&quot;phoneIntCode&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;CountryAccessCode&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;phoneIntCode&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:if>&#xa;                                            &lt;xsl:if test=&quot;phoneAreaCode&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;AreaCityCode&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;phoneAreaCode&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:if>&#xa;                                            &lt;xsl:attribute name=&quot;PhoneNumber&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;phoneNumber&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                            &lt;xsl:if test=&quot;phoneExt&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;Extension&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;phoneExt&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:if>&#xa;                                            &lt;xsl:attribute name=&quot;DefaultInd&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;true()&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                            &lt;xsl:if test=&quot;phoneType&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;Remark&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;phoneType&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:if>&#xa;                                            &lt;xsl:choose>&#xa;                                                &lt;xsl:when test=&quot;current()/phoneType = &amp;quot;BPH&amp;quot; or current()/phoneType = &amp;quot;HPH&amp;quot;&quot;>&#xa;                                                    &lt;xsl:attribute name=&quot;PhoneTechType&quot;>&#xa;                                                        &lt;xsl:value-of select=&quot;&amp;quot;1&amp;quot;&quot;/>&#xa;                                                    &lt;/xsl:attribute>&#xa;                                                &lt;/xsl:when>&#xa;                                                &lt;xsl:when test=&quot;current()/phoneType = &amp;quot;BFX&amp;quot; or current()/phoneType = &amp;quot;HFX&amp;quot;&quot;>&#xa;                                                    &lt;xsl:attribute name=&quot;PhoneTechType&quot;>&#xa;                                                        &lt;xsl:value-of select=&quot;&amp;quot;3&amp;quot;&quot;/>&#xa;                                                    &lt;/xsl:attribute>&#xa;                                                &lt;/xsl:when>&#xa;                                                &lt;xsl:otherwise>&#xa;                                                    &lt;xsl:attribute name=&quot;PhoneTechType&quot;>&#xa;                                                        &lt;xsl:value-of select=&quot;&amp;quot;5&amp;quot;&quot;/>&#xa;                                                    &lt;/xsl:attribute>&#xa;                                                &lt;/xsl:otherwise>&#xa;                                            &lt;/xsl:choose>&#xa;                                        &lt;/pfx2:Telephone>&#xa;                                    &lt;/xsl:for-each>&#xa;                                    &lt;xsl:for-each select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/emails[emailPreferred = &amp;quot;T&amp;quot;]&quot;>&#xa;                                        &lt;xsl:if test=&quot;emailAddress&quot;>&#xa;                                            &lt;pfx2:Email>&#xa;                                                &lt;xsl:value-of select=&quot;emailAddress&quot;/>&#xa;                                            &lt;/pfx2:Email>&#xa;                                        &lt;/xsl:if>&#xa;                                    &lt;/xsl:for-each>&#xa;                                    &lt;pfx2:Address>&#xa;                                        &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/address[1]/zipCode&quot;>&#xa;                                            &lt;pfx2:PostalCode>&#xa;                                                &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/address[1]/zipCode&quot;/>&#xa;                                            &lt;/pfx2:PostalCode>&#xa;                                        &lt;/xsl:if>&#xa;                                    &lt;/pfx2:Address>&#xa;                                    &lt;pfx2:CustLoyalty>&#xa;                                        &lt;xsl:attribute name=&quot;LoyalLevel&quot;>&#xa;                                            &lt;xsl:value-of select=&quot;$GetTierCode/description&quot;/>&#xa;                                        &lt;/xsl:attribute>&#xa;                                        &lt;xsl:attribute name=&quot;ProgramID&quot;>&#xa;                                            &lt;xsl:value-of select=&quot;$PassengerProfile-Constants-Service-Profile-ProgramID&quot;/>&#xa;                                        &lt;/xsl:attribute>&#xa;                                        &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/id&quot;>&#xa;                                            &lt;xsl:attribute name=&quot;MembershipID&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/id&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                        &lt;/xsl:if>&#xa;                                        &lt;pfx2:SubAccountBalance>&#xa;                                            &lt;xsl:attribute name=&quot;Balance&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;round($getProfileFromAmadeus/retrieveMemberResponse/memberCard/awardMiles)&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                        &lt;/pfx2:SubAccountBalance>&#xa;                                    &lt;/pfx2:CustLoyalty>&#xa;                                    &lt;pfx2:TPA_Extensions>&#xa;                                        &lt;pfx4:CopaProfileExt>&#xa;                                            &lt;xsl:choose>&#xa;                                                &lt;xsl:when test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/processCode = $PassengerProfile-Constants-Service-Profile-ProcessStatus-Success&quot;>&#xa;                                                    &lt;pfx4:ProfileProcessStatus>&#xa;                                                        &lt;xsl:value-of select=&quot;$PassengerProfile-Constants-Service-Profile-Found&quot;/>&#xa;                                                    &lt;/pfx4:ProfileProcessStatus>&#xa;                                                &lt;/xsl:when>&#xa;                                                &lt;xsl:otherwise>&#xa;                                                    &lt;pfx4:ProfileProcessStatus>&#xa;                                                        &lt;xsl:value-of select=&quot;$PassengerProfile-Constants-Service-Profile-PreAssigned&quot;/>&#xa;                                                    &lt;/pfx4:ProfileProcessStatus>&#xa;                                                &lt;/xsl:otherwise>&#xa;                                            &lt;/xsl:choose>&#xa;                                            &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/id&quot;>&#xa;                                                &lt;pfx4:FrequentFlyerNumber>&#xa;                                                    &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/id&quot;/>&#xa;                                                &lt;/pfx4:FrequentFlyerNumber>&#xa;                                            &lt;/xsl:if>&#xa;                                            &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/userName&quot;>&#xa;                                                &lt;pfx4:UserName>&#xa;                                                    &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/userName&quot;/>&#xa;                                                &lt;/pfx4:UserName>&#xa;                                            &lt;/xsl:if>&#xa;                                            &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/status&quot;>&#xa;                                                &lt;pfx4:Status>&#xa;                                                    &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/status&quot;/>&#xa;                                                &lt;/pfx4:Status>&#xa;                                            &lt;/xsl:if>&#xa;                                            &lt;xsl:if test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/title&quot;>&#xa;                                                &lt;pfx4:Title>&#xa;                                                    &lt;xsl:value-of select=&quot;$getProfileFromAmadeus/retrieveMemberResponse/title&quot;/>&#xa;                                                &lt;/pfx4:Title>&#xa;                                            &lt;/xsl:if>&#xa;                                            &lt;pfx4:Loyalty>&#xa;                                                &lt;pfx4:TierCode>&#xa;                                                    &lt;xsl:value-of select=&quot;$GetTierCode/hardCode&quot;/>&#xa;                                                &lt;/pfx4:TierCode>&#xa;                                                &lt;pfx4:SoftTierCode>&#xa;                                                    &lt;xsl:value-of select=&quot;$GetTierCode/softCode&quot;/>&#xa;                                                &lt;/pfx4:SoftTierCode>&#xa;                                            &lt;/pfx4:Loyalty>&#xa;                                        &lt;/pfx4:CopaProfileExt>&#xa;                                    &lt;/pfx2:TPA_Extensions>&#xa;                                &lt;/pfx2:Customer>&#xa;                            &lt;/pfx2:Profile>&#xa;                        &lt;/pfx2:ProfileInfo>&#xa;                    &lt;/pfx2:Profiles>&#xa;                &lt;/pfx2:OTA_ProfileReadRS>&#xa;            &lt;/xsl:when>&#xa;            &lt;xsl:otherwise>&#xa;                &lt;pfx2:OTA_ProfileReadRS>&#xa;                    &lt;xsl:attribute name=&quot;Version&quot;>&#xa;                        &lt;xsl:value-of select=&quot;$Start/pfx2:OTA_ReadRQ/@Version&quot;/>&#xa;                    &lt;/xsl:attribute>&#xa;                    &lt;pfx2:Success/>&#xa;                    &lt;pfx2:Profiles>&#xa;                        &lt;pfx2:ProfileInfo>&#xa;                            &lt;pfx2:Profile>&#xa;                                &lt;pfx2:Customer>&#xa;                                    &lt;xsl:if test=&quot;string-length($getCache/Result[1]/Tuple/DateOfBirth) > 0&quot;>&#xa;                                        &lt;xsl:attribute name=&quot;BirthDate&quot;>&#xa;                                            &lt;xsl:value-of select=&quot;tib:create-date(substring($getCache/Result[1]/Tuple/DateOfBirth, 1, 4), substring($getCache/Result[1]/Tuple/DateOfBirth, 6, 2), substring($getCache/Result[1]/Tuple/DateOfBirth, 9, 2))&quot;/>&#xa;                                        &lt;/xsl:attribute>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:if test=&quot;string-length($getCache/Result[1]/Tuple/CommunicationLanguage) > 0&quot;>&#xa;                                        &lt;xsl:if test=&quot;$getCache/Result[1]/Tuple/CommunicationLanguage&quot;>&#xa;                                            &lt;xsl:attribute name=&quot;Language&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;$getCache/Result[1]/Tuple/CommunicationLanguage&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                        &lt;/xsl:if>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;pfx2:PersonName>&#xa;                                        &lt;xsl:attribute name=&quot;DefaultInd&quot;>&#xa;                                            &lt;xsl:value-of select=&quot;true()&quot;/>&#xa;                                        &lt;/xsl:attribute>&#xa;                                        &lt;xsl:if test=&quot;string-length($getCache/Result[1]/Tuple/FirstName) > 0&quot;>&#xa;                                            &lt;xsl:if test=&quot;$getCache/Result[1]/Tuple/FirstName&quot;>&#xa;                                                &lt;pfx2:GivenName>&#xa;                                                    &lt;xsl:value-of select=&quot;$getCache/Result[1]/Tuple/FirstName&quot;/>&#xa;                                                &lt;/pfx2:GivenName>&#xa;                                            &lt;/xsl:if>&#xa;                                        &lt;/xsl:if>&#xa;                                        &lt;xsl:if test=&quot;string-length($getCache/Result[1]/Tuple/MiddleName) > 0&quot;>&#xa;                                            &lt;xsl:if test=&quot;$getCache/Result[1]/Tuple/MiddleName&quot;>&#xa;                                                &lt;pfx2:MiddleName>&#xa;                                                    &lt;xsl:value-of select=&quot;$getCache/Result[1]/Tuple/MiddleName&quot;/>&#xa;                                                &lt;/pfx2:MiddleName>&#xa;                                            &lt;/xsl:if>&#xa;                                        &lt;/xsl:if>&#xa;                                        &lt;xsl:choose>&#xa;                                            &lt;xsl:when test=&quot;string-length($getCache/Result[1]/Tuple/Surname) > 0&quot;>&#xa;                                                &lt;xsl:if test=&quot;$getCache/Result[1]/Tuple/Surname&quot;>&#xa;                                                    &lt;pfx2:Surname>&#xa;                                                        &lt;xsl:value-of select=&quot;$getCache/Result[1]/Tuple/Surname&quot;/>&#xa;                                                    &lt;/pfx2:Surname>&#xa;                                                &lt;/xsl:if>&#xa;                                            &lt;/xsl:when>&#xa;                                            &lt;xsl:otherwise>&#xa;                                                &lt;pfx2:Surname>&#xa;                                                    &lt;xsl:value-of select=&quot;&amp;quot; &amp;quot;&quot;/>&#xa;                                                &lt;/pfx2:Surname>&#xa;                                            &lt;/xsl:otherwise>&#xa;                                        &lt;/xsl:choose>&#xa;                                    &lt;/pfx2:PersonName>&#xa;                                    &lt;xsl:if test=&quot;string-length($getCache/Result[1]/Tuple/PreferredPhonePhoneNumber) > 0&quot;>&#xa;                                        &lt;pfx2:Telephone>&#xa;                                            &lt;xsl:if test=&quot;string-length($getCache/Result[1]/Tuple/PreferredPhoneLocationType) > 0&quot;>&#xa;                                                &lt;xsl:if test=&quot;$getCache/Result[1]/Tuple/PreferredPhoneLocationType&quot;>&#xa;                                                    &lt;xsl:attribute name=&quot;PhoneLocationType&quot;>&#xa;                                                        &lt;xsl:value-of select=&quot;$getCache/Result[1]/Tuple/PreferredPhoneLocationType&quot;/>&#xa;                                                    &lt;/xsl:attribute>&#xa;                                                &lt;/xsl:if>&#xa;                                            &lt;/xsl:if>&#xa;                                            &lt;xsl:if test=&quot;string-length($getCache/Result[1]/Tuple/PreferredPhoneTechType) > 0&quot;>&#xa;                                                &lt;xsl:if test=&quot;$getCache/Result[1]/Tuple/PreferredPhoneTechType&quot;>&#xa;                                                    &lt;xsl:attribute name=&quot;PhoneTechType&quot;>&#xa;                                                        &lt;xsl:value-of select=&quot;$getCache/Result[1]/Tuple/PreferredPhoneTechType&quot;/>&#xa;                                                    &lt;/xsl:attribute>&#xa;                                                &lt;/xsl:if>&#xa;                                            &lt;/xsl:if>&#xa;                                            &lt;xsl:if test=&quot;string-length($getCache/Result[1]/Tuple/PreferredPhoneCountryAccessCode) > 0&quot;>&#xa;                                                &lt;xsl:if test=&quot;$getCache/Result[1]/Tuple/PreferredPhoneCountryAccessCode&quot;>&#xa;                                                    &lt;xsl:attribute name=&quot;CountryAccessCode&quot;>&#xa;                                                        &lt;xsl:value-of select=&quot;$getCache/Result[1]/Tuple/PreferredPhoneCountryAccessCode&quot;/>&#xa;                                                    &lt;/xsl:attribute>&#xa;                                                &lt;/xsl:if>&#xa;                                            &lt;/xsl:if>&#xa;                                            &lt;xsl:if test=&quot;string-length($getCache/Result[1]/Tuple/PreferredPhoneAreaCityCode) > 0&quot;>&#xa;                                                &lt;xsl:if test=&quot;$getCache/Result[1]/Tuple/PreferredPhoneAreaCityCode&quot;>&#xa;                                                    &lt;xsl:attribute name=&quot;AreaCityCode&quot;>&#xa;                                                        &lt;xsl:value-of select=&quot;$getCache/Result[1]/Tuple/PreferredPhoneAreaCityCode&quot;/>&#xa;                                                    &lt;/xsl:attribute>&#xa;                                                &lt;/xsl:if>&#xa;                                            &lt;/xsl:if>&#xa;                                            &lt;xsl:attribute name=&quot;PhoneNumber&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;$getCache/Result[1]/Tuple/PreferredPhonePhoneNumber&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                            &lt;xsl:if test=&quot;string-length($getCache/Result[1]/Tuple/PreferredPhoneExtension) > 0&quot;>&#xa;                                                &lt;xsl:if test=&quot;$getCache/Result[1]/Tuple/PreferredPhoneExtension&quot;>&#xa;                                                    &lt;xsl:attribute name=&quot;Extension&quot;>&#xa;                                                        &lt;xsl:value-of select=&quot;$getCache/Result[1]/Tuple/PreferredPhoneExtension&quot;/>&#xa;                                                    &lt;/xsl:attribute>&#xa;                                                &lt;/xsl:if>&#xa;                                            &lt;/xsl:if>&#xa;                                            &lt;xsl:if test=&quot;string-length($getCache/Result[1]/Tuple/PreferredPhoneRemark) > 0&quot;>&#xa;                                                &lt;xsl:if test=&quot;$getCache/Result[1]/Tuple/PreferredPhoneRemark&quot;>&#xa;                                                    &lt;xsl:attribute name=&quot;Remark&quot;>&#xa;                                                        &lt;xsl:value-of select=&quot;$getCache/Result[1]/Tuple/PreferredPhoneRemark&quot;/>&#xa;                                                    &lt;/xsl:attribute>&#xa;                                                &lt;/xsl:if>&#xa;                                            &lt;/xsl:if>&#xa;                                            &lt;xsl:attribute name=&quot;DefaultInd&quot;>&#xa;                                                &lt;xsl:value-of select=&quot;true()&quot;/>&#xa;                                            &lt;/xsl:attribute>&#xa;                                        &lt;/pfx2:Telephone>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:if test=&quot;string-length($getCache/Result[1]/Tuple/EmailAddress) > 0&quot;>&#xa;                                        &lt;xsl:if test=&quot;$getCache/Result[1]/Tuple/EmailAddress&quot;>&#xa;                                            &lt;pfx2:Email>&#xa;                                                &lt;xsl:value-of select=&quot;$getCache/Result[1]/Tuple/EmailAddress&quot;/>&#xa;                                            &lt;/pfx2:Email>&#xa;                                        &lt;/xsl:if>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;xsl:if test=&quot;string-length($getCache/Result[1]/Tuple/ZIPCode) > 0&quot;>&#xa;                                        &lt;pfx2:Address>&#xa;                                            &lt;xsl:if test=&quot;string-length($getCache/Result[1]/Tuple/ZIPCode) > 0&quot;>&#xa;                                                &lt;xsl:if test=&quot;$getCache/Result[1]/Tuple/ZIPCode&quot;>&#xa;                                                    &lt;pfx2:PostalCode>&#xa;                                                        &lt;xsl:value-of select=&quot;$getCache/Result[1]/Tuple/ZIPCode&quot;/>&#xa;                                                    &lt;/pfx2:PostalCode>&#xa;                                                &lt;/xsl:if>&#xa;                                            &lt;/xsl:if>&#xa;                                        &lt;/pfx2:Address>&#xa;                                    &lt;/xsl:if>&#xa;                                    &lt;pfx2:CustLoyalty>&#xa;                                        &lt;xsl:attribute name=&quot;LoyalLevel&quot;>&#xa;                                            &lt;xsl:value-of select=&quot;$GetTierCodeLight/description&quot;/>&#xa;                                        &lt;/xsl:attribute>&#xa;                                        &lt;xsl:attribute name=&quot;ProgramID&quot;>&#xa;                                            &lt;xsl:value-of select=&quot;$PassengerProfile-Constants-Service-Profile-ProgramID&quot;/>&#xa;                                        &lt;/xsl:attribute>&#xa;                                        &lt;xsl:if test=&quot;string-length($getCache/Result[1]/Tuple/FrequentFlyerNumber) > 0&quot;>&#xa;                                            &lt;xsl:if test=&quot;$getCache/Result[1]/Tuple/FrequentFlyerNumber&quot;>&#xa;                                                &lt;xsl:attribute name=&quot;MembershipID&quot;>&#xa;                                                    &lt;xsl:value-of select=&quot;$getCache/Result[1]/Tuple/FrequentFlyerNumber&quot;/>&#xa;                                                &lt;/xsl:attribute>&#xa;                                            &lt;/xsl:if>&#xa;                                        &lt;/xsl:if>&#xa;                                        &lt;xsl:if test=&quot;string-length($getCache/Result[1]/Tuple/MilesAwardBalance) > 0&quot;>&#xa;                                            &lt;pfx2:SubAccountBalance>&#xa;                                                &lt;xsl:if test=&quot;$getCache/Result[1]/Tuple/MilesAwardBalance&quot;>&#xa;                                                    &lt;xsl:attribute name=&quot;Balance&quot;>&#xa;                                                        &lt;xsl:value-of select=&quot;$getCache/Result[1]/Tuple/MilesAwardBalance&quot;/>&#xa;                                                    &lt;/xsl:attribute>&#xa;                                                &lt;/xsl:if>&#xa;                                            &lt;/pfx2:SubAccountBalance>&#xa;                                        &lt;/xsl:if>&#xa;                                    &lt;/pfx2:CustLoyalty>&#xa;                                    &lt;pfx2:TPA_Extensions>&#xa;                                        &lt;pfx4:CopaProfileExt>&#xa;                                            &lt;xsl:if test=&quot;$getCache/Result[1]/Tuple/ProcessStatus&quot;>&#xa;                                                &lt;pfx4:ProfileProcessStatus>&#xa;                                                    &lt;xsl:value-of select=&quot;$getCache/Result[1]/Tuple/ProcessStatus&quot;/>&#xa;                                                &lt;/pfx4:ProfileProcessStatus>&#xa;                                            &lt;/xsl:if>&#xa;                                            &lt;xsl:if test=&quot;$getCache/Result[1]/Tuple/FrequentFlyerNumber&quot;>&#xa;                                                &lt;pfx4:FrequentFlyerNumber>&#xa;                                                    &lt;xsl:value-of select=&quot;$getCache/Result[1]/Tuple/FrequentFlyerNumber&quot;/>&#xa;                                                &lt;/pfx4:FrequentFlyerNumber>&#xa;                                            &lt;/xsl:if>&#xa;                                            &lt;xsl:if test=&quot;$getCache/Result[1]/Tuple/UserName&quot;>&#xa;                                                &lt;pfx4:UserName>&#xa;                                                    &lt;xsl:value-of select=&quot;$getCache/Result[1]/Tuple/UserName&quot;/>&#xa;                                                &lt;/pfx4:UserName>&#xa;                                            &lt;/xsl:if>&#xa;                                            &lt;xsl:if test=&quot;$getCache/Result[1]/Tuple/Status&quot;>&#xa;                                                &lt;pfx4:Status>&#xa;                                                    &lt;xsl:value-of select=&quot;$getCache/Result[1]/Tuple/Status&quot;/>&#xa;                                                &lt;/pfx4:Status>&#xa;                                            &lt;/xsl:if>&#xa;                                            &lt;xsl:if test=&quot;$getCache/Result[1]/Tuple/Title&quot;>&#xa;                                                &lt;pfx4:Title>&#xa;                                                    &lt;xsl:value-of select=&quot;$getCache/Result[1]/Tuple/Title&quot;/>&#xa;                                                &lt;/pfx4:Title>&#xa;                                            &lt;/xsl:if>&#xa;                                            &lt;pfx4:Loyalty>&#xa;                                                &lt;pfx4:TierCode>&#xa;                                                    &lt;xsl:value-of select=&quot;$GetTierCodeLight/hardCode&quot;/>&#xa;                                                &lt;/pfx4:TierCode>&#xa;                                                &lt;pfx4:SoftTierCode>&#xa;                                                    &lt;xsl:value-of select=&quot;$GetTierCodeLight/softCode&quot;/>&#xa;                                                &lt;/pfx4:SoftTierCode>&#xa;                                            &lt;/pfx4:Loyalty>&#xa;                                        &lt;/pfx4:CopaProfileExt>&#xa;                                    &lt;/pfx2:TPA_Extensions>&#xa;                                &lt;/pfx2:Customer>&#xa;                            &lt;/pfx2:Profile>&#xa;                        &lt;/pfx2:ProfileInfo>&#xa;                    &lt;/pfx2:Profiles>&#xa;                &lt;/pfx2:OTA_ProfileReadRS>&#xa;            &lt;/xsl:otherwise>&#xa;        &lt;/xsl:choose>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                    </tibex:inputBindings>
                    <tibex:config>
                        <bwext:BWActivity
                            activityTypeID="bw.generalactivities.mapper"
                            version="6.0.0.001"
                            xmlns:OTA_2003_05="http://www.opentravel.org/OTA/2003/05"
                            xmlns:activityconfig="http://tns.tibco.com/bw/model/activityconfig"
                            xmlns:bwext="http://tns.tibco.com/bw/model/core/bwext"
                            xmlns:generalactivities="http://ns.tibco.com/bw/palette/generalactivities" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <activityConfig>
                                <properties name="config" xsi:type="activityconfig:EMFProperty">
                                    <type href="http://ns.tibco.com/bw/palette/generalactivities#//Mapper"/>
                                    <value
                                    inputQName="OTA_2003_05:OTA_ProfileReadRS" xsi:type="generalactivities:Mapper"/>
                                </properties>
                            </activityConfig>
                        </bwext:BWActivity>
                    </tibex:config>
                </tibex:activityExtension>
            </bpws:extensionActivity>
            <bpws:extensionActivity>
                <tibex:activityExtension inputVariable="End-input"
                    name="End"
                    tibex:xpdlId="d2666a2b-2081-4877-ba46-90e036e1be7f" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets>
                        <bpws:target linkName="Map-Data-Light-to-End"/>
                        <bpws:target linkName="Map-Data-Full-to-End"/>
                        <bpws:target linkName="Null-1-to-End"/>
                        <bpws:target linkName="Map-Data-PreAssigned-to-End"/>
                    </bpws:targets>
                    <tibex:inputBindings>
                        <tibex:inputBinding
                            expression="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:pfx2=&quot;http://www.opentravel.org/OTA/2003/05&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns12=&quot;http://www.hp.com/schemas/services/exception&quot; version=&quot;1.0&quot;>&lt;xsl:param name=&quot;Map-Data-Light&quot;/>&lt;xsl:param name=&quot;Map-Data-Full&quot;/>&lt;xsl:param name=&quot;Map-Data-PreAssigned&quot;/>&lt;xsl:param name=&quot;PassengerProfile-Constants-Service-Profile-PreAssigned&quot;/>&lt;xsl:param name=&quot;getCache&quot;/>&lt;xsl:param name=&quot;PassengerProfile-Constants-Service-Profile-ProcessStatus-Preassigned&quot;/>&lt;xsl:param name=&quot;getProfileFromAmadeus&quot;/>&lt;xsl:param name=&quot;PassengerProfile-Constants-OTA-Codes-EWT-UNKNOWN&quot;/>&lt;xsl:param name=&quot;Start&quot;/>&lt;xsl:template name=&quot;End-Input&quot; match=&quot;/&quot;>&lt;pfx2:OTA_ProfileReadRS>&lt;xsl:attribute name=&quot;Version&quot;>&lt;xsl:value-of select=&quot;$Start/pfx2:OTA_ReadRQ/@Version&quot;/>&lt;/xsl:attribute>&lt;xsl:choose>&lt;xsl:when test=&quot;exists($Exception)&quot;>&lt;pfx2:Errors>&lt;pfx2:Error>&lt;xsl:attribute name=&quot;Type&quot;>&lt;xsl:value-of select=&quot;$PassengerProfile-Constants-OTA-Codes-EWT-UNKNOWN&quot;/>&lt;/xsl:attribute>&lt;xsl:if test=&quot;$Exception/ns12:exception-detail/ns12:code&quot;>&lt;xsl:attribute name=&quot;ShortText&quot;>&lt;xsl:value-of select=&quot;$Exception/ns12:exception-detail/ns12:code&quot;/>&lt;/xsl:attribute>&lt;/xsl:if>&lt;xsl:value-of select=&quot;$Exception/ns12:exception-detail/ns12:message&quot;/>&lt;/pfx2:Error>&lt;/pfx2:Errors>&lt;/xsl:when>&lt;xsl:otherwise>&lt;pfx2:Success/>&lt;xsl:choose>&lt;xsl:when test=&quot;$getProfileFromAmadeus/retrieveMemberResponse/processCode = $PassengerProfile-Constants-Service-Profile-ProcessStatus-Preassigned or $getCache/Result/Tuple/ProcessStatus = $PassengerProfile-Constants-Service-Profile-PreAssigned&quot;>&lt;xsl:copy-of select=&quot;$Map-Data-PreAssigned/pfx2:Profiles&quot;/>&lt;/xsl:when>&lt;xsl:when test=&quot;$Start/light = false() and not($getProfileFromAmadeus/retrieveMemberResponse/processCode = $PassengerProfile-Constants-Service-Profile-ProcessStatus-Preassigned or $getCache/Result/Tuple/ProcessStatus = $PassengerProfile-Constants-Service-Profile-PreAssigned)&quot;>&lt;xsl:copy-of select=&quot;$Map-Data-Full/pfx2:Profiles&quot;/>&lt;/xsl:when>&lt;xsl:otherwise>&lt;xsl:copy-of select=&quot;$Map-Data-Light/pfx2:Profiles&quot;/>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/xsl:otherwise>&lt;/xsl:choose>&lt;/pfx2:OTA_ProfileReadRS>&lt;/xsl:template>&lt;/xsl:stylesheet>" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xslt1.0"/>
                    </tibex:inputBindings>
                    <tibex:config>
                        <bwext:BWActivity
                            activityTypeID="bw.internal.end"
                            xmlns:activityconfig="http://tns.tibco.com/bw/model/activityconfig"
                            xmlns:bwext="http://tns.tibco.com/bw/model/core/bwext"
                            xmlns:internalactivities="http://ns.tibco.com/bw/core/internalactivity" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <activityConfig>
                                <properties name="config" xsi:type="activityconfig:EMFProperty">
                                    <type href="http://ns.tibco.com/bw/core/internalactivity#//End"/>
                                    <value xsi:type="internalactivities:End"/>
                                </properties>
                            </activityConfig>
                        </bwext:BWActivity>
                    </tibex:config>
                </tibex:activityExtension>
            </bpws:extensionActivity>
        </bpws:flow>
    </bpws:scope>
</bpws:process>
